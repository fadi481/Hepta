"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13046],{90251:function(e,t,n){n.d(t,{q:function(){return $}});var o=n(97458),r=n(91169),i=n(52983),s=n(49517),a=n(19971),d=n(32039);const[l,c]=(0,d.k)({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"});var u=n(92443),p=n(68940),h=n(6767),m=n(16649),f=(0,u.F)("avatar").parts("root","image","fallback").build(),g=(0,p.tp)({getRootId:e=>`avatar:${e.id}`,getImageId:e=>`avatar:${e.id}:image`,getFallbackId:e=>`avatar:${e.id}:fallback`,getRootEl:e=>g.getById(e,g.getRootId(e)),getImageEl:e=>g.getById(e,g.getImageId(e))});var v=n(6263),y=n(86855),C=n(89722);const x=(e={})=>{const t={id:(0,i.useId)(),getRootNode:(0,C.U)(),...e},n={...t,onLoadingStatusChange:(0,y.z)(e.onLoadingStatusChange)},[o,s]=(0,v.eO)(function(e){const t=(0,m.oA)(e);return(0,r.C8)({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:t,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImgStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(e,t,{send:n}){const o=g.getImageEl(e);return(0,h.F)(o,["src","srcset"],(()=>{n({type:"SRC.CHANGE"})}))},trackImageRemoval(e,t,{send:n}){const o=g.getRootEl(e);return(0,h.P)(o,(e=>{Array.from(e[0].removedNodes).find((e=>e.matches("[data-scope=avatar][data-part=image]")))&&n({type:"IMG.UNMOUNT"})}))}},actions:{invokeOnLoad(e){e.onLoadingStatusChange?.({status:"loaded"})},invokeOnError(e){e.onLoadingStatusChange?.({status:"error"})},checkImgStatus(e,t,{send:n}){const o=g.getImageEl(e);o?.complete&&n({type:o.currentSrc?"IMG.LOADED":"IMG.ERROR",src:"ssr"})}}})}(t),{context:n});return function(e,t,n){const o=e.matches("loaded"),r=!o;return{isLoaded:o,showFallback:r,setSrc(e){t({type:"SRC.SET",src:e})},setLoaded(){t({type:"IMG.LOADED",src:"api"})},setError(){t({type:"IMG.ERROR",src:"api"})},rootProps:n.element({...f.root.attrs,dir:e.context.dir,id:g.getRootId(e.context),style:{display:"grid",gridTemplateRows:"1fr 1fr",overflow:"hidden"}}),imageProps:n.img({...f.image.attrs,dir:e.context.dir,id:g.getImageId(e.context),"data-state":o?"visible":"hidden",onLoad(){t({type:"IMG.LOADED",src:"element"})},onError(){t({type:"IMG.ERROR",src:"element"})},style:{gridArea:"1 / 1 / 2 / 2",visibility:o?void 0:"hidden"}}),fallbackProps:n.element({...f.fallback.attrs,dir:e.context.dir,id:g.getFallbackId(e.context),hidden:!r,"data-state":o?"hidden":"visible",style:{gridArea:"1 / 1 / 2 / 2"}})}}(o,s,v.vs)},M=(0,i.forwardRef)(((e,t)=>{const[n,i]=(0,s.x)()(e,["dir","getRootNode","id","onLoadingStatusChange"]),d=x(n),c=(0,r.dG)(d.rootProps,i);return(0,o.jsx)(l,{value:d,children:(0,o.jsx)(a.e.div,{...c,ref:t})})}));M.displayName="Avatar";const b=(0,i.forwardRef)(((e,t)=>{const n=c(),i=(0,r.dG)(n.fallbackProps,e);return(0,o.jsx)(a.e.span,{...i,ref:t})}));b.displayName="AvatarFallback";const E=(0,i.forwardRef)(((e,t)=>{const n=c(),i=(0,r.dG)(n.imageProps,e);return(0,o.jsx)(a.e.img,{...i,ref:t})}));E.displayName="AvatarImage";const w=Object.assign(M,{Root:M,Fallback:b,Image:E});var S=n(94802),k=n(8232),L=n(51004),R=n(16153),A=n(87094),I=n(93878);const O={xs:"22px",sm:"28px",md:"36px",lg:"42px",xl:"56px","2xl":"82px","3xl":"110px",auto:"100%"},N=({size:e="md"})=>(0,o.jsx)(S.J,{viewBox:"0 0 110 110",fill:"none",height:O[e],width:O[e],children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M55 100.176C30.0497 100.176 9.82351 79.9503 9.82351 55C9.82351 30.0497 30.0497 9.82354 55 9.82354C79.9503 9.82354 100.176 30.0497 100.176 55C100.176 79.9503 79.9503 100.176 55 100.176ZM0.411743 55C0.411743 24.8518 24.8517 0.411774 55 0.411774C85.1482 0.411774 109.588 24.8518 109.588 55C109.588 85.1483 85.1482 109.588 55 109.588C24.8517 109.588 0.411743 85.1483 0.411743 55ZM55.0014 91.1414C64.681 91.1414 73.1418 85.699 77.7235 77.5884H32.2794C36.8611 85.699 45.3218 91.1414 55.0014 91.1414ZM85.4926 63.4706C85.4926 67.1092 82.543 70.0588 78.9044 70.0588C75.2658 70.0588 72.3162 67.1092 72.3162 63.4706C72.3162 59.832 75.2658 56.8824 78.9044 56.8824C82.543 56.8824 85.4926 59.832 85.4926 63.4706ZM30.7206 70.0588C34.3591 70.0588 37.3088 67.1092 37.3088 63.4706C37.3088 59.832 34.3591 56.8824 30.7206 56.8824C27.082 56.8824 24.1323 59.832 24.1323 63.4706C24.1323 67.1092 27.082 70.0588 30.7206 70.0588Z",fill:"#03C1EB"})}),P={xs:".75rem",sm:"1rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem","3xl":"4rem",auto:"100%"},$=({size:e="md",src:t,srcSet:n,alt:r,nameProps:i,...s})=>{const a=(0,k.mq)("Avatar",{size:e}),d=i&&(0,R.L)({theme:A.r,color:i.color,colorMode:"light"}),l=i?(0,o.jsx)(L.xu,{__css:a,display:"flex",alignItems:"center",justifyContent:"center",bg:i?i.color:"blue.500",color:(0,I.XV)(d),fontSize:P[e],children:i.name.charAt(0).toUpperCase()}):(0,o.jsx)(L.xu,{__css:a,bg:"#C4F4FF",display:"flex",alignItems:"center",justifyContent:"center",children:(0,o.jsx)(N,{size:e})});return(0,o.jsxs)(w.Root,{style:{display:"unset",position:"relative"},...s,children:[(0,o.jsx)(w.Fallback,{asChild:!0,children:l}),(0,o.jsx)(w.Image,{asChild:!0,children:(0,o.jsx)(L.xu,{as:"img",position:t?"relative":"absolute",src:t,srcSet:n,alt:r,__css:a})})]})}},53106:function(e,t,n){n.d(t,{ZP:function(){return d}});var o=n(63444);const r=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,i=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,s=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,a=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,d=o.vc.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",(0,o.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,o.Cf)({find:r,type:this.type}),(0,o.Cf)({find:s,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:i,type:this.type}),(0,o.K9)({find:a,type:this.type})]}})},43831:function(e,t,n){n.d(t,{Z:function(){return o}});const o=n(63444).NB.create({name:"doc",topNode:!0,content:"block+"})},74145:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(63444);const r=o.NB.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",(0,o.P1)(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:o})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:r}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:s}=o.extensionManager,a=r||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&i){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}})},95616:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(63444),r=n(33960);const i=o.hj.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>(0,r.Yw)(e,t),redo:()=>({state:e,dispatch:t})=>(0,r.KX)(e,t)}),addProseMirrorPlugins(){return[(0,r.m8)(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}})},29143:function(e,t,n){n.d(t,{ZP:function(){return a}});var o=n(63444),r=n(95152),i=n(42591);const s=new r.H$("mention"),a=o.NB.create({name:"mention",addOptions(){return{HTMLAttributes:{},renderLabel({options:e,node:t}){var n;return`${e.suggestion.char}${null!==(n=t.attrs.label)&&void 0!==n?n:t.attrs.id}`},suggestion:{char:"@",pluginKey:s,command:({editor:e,range:t,props:n})=>{var o,r;const i=e.view.state.selection.$to.nodeAfter;(null===(o=null===i||void 0===i?void 0:i.text)||void 0===o?void 0:o.startsWith(" "))&&(t.to+=1),e.chain().focus().insertContentAt(t,[{type:this.name,attrs:n},{type:"text",text:" "}]).run(),null===(r=window.getSelection())||void 0===r||r.collapseToEnd()},allow:({state:e,range:t})=>{const n=e.doc.resolve(t.from),o=e.schema.nodes[this.name];return!!n.parent.type.contentMatch.matchType(o)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}),parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){return["span",(0,o.P1)({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e})]},renderText({node:e}){return this.options.renderLabel({options:this.options,node:e})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command((({tr:e,state:t})=>{let n=!1;const{selection:o}=t,{empty:r,anchor:i}=o;return!!r&&(t.doc.nodesBetween(i-1,i,((t,o)=>{if(t.type.name===this.name)return n=!0,e.insertText(this.options.suggestion.char||"",o,o+t.nodeSize),!1})),n)}))}},addProseMirrorPlugins(){return[(0,i.ZP)({editor:this.editor,...this.options.suggestion})]}})},74133:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(63444);const r=o.NB.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",(0,o.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}})},93336:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(63444),r=n(95152),i=n(35746);const s=o.hj.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=t,r=[];if(!n)return null;const s=e.type.createAndFill(),a=(null===s||void 0===s?void 0:s.sameMarkup(e))&&null===s.content.findDiffStart(e.content);return e.descendants(((e,t)=>{const n=o>=t&&o<=t+e.nodeSize,s=!e.isLeaf&&!e.childCount;if((n||!this.options.showOnlyCurrent)&&s){const o=[this.options.emptyNodeClass];a&&o.push(this.options.emptyEditorClass);const s=i.p.node(t,t+e.nodeSize,{class:o.join(" "),"data-placeholder":"function"===typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});r.push(s)}return this.options.includeChildren})),i.EH.create(e,r)}}})]}})},62481:function(e,t,n){n.d(t,{Z:function(){return o}});const o=n(63444).NB.create({name:"text",group:"inline"})},42145:function(e,t,n){n.d(t,{T5:function(){return p},fW:function(){return f},jE:function(){return g},kg:function(){return l}});var o=n(52983),r=n(63444),i=n(63730);class s extends r.ML{constructor(){super(...arguments),this.contentComponent=null}}const a=({renderers:e})=>o.createElement(o.Fragment,null,Object.entries(e).map((([e,t])=>i.createPortal(t.reactElement,t.element,e))));class d extends o.Component{constructor(e){super(e),this.editorContentRef=o.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,i.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync((()=>{this.setState((({renderers:n})=>({renderers:{...n,[e]:t}})))}))}removeRenderer(e){this.maybeFlushSync((()=>{this.setState((({renderers:t})=>{const n={...t};return delete n[e],{renderers:n}}))}))}componentWillUnmount(){const{editor:e}=this.props;if(!e)return;if(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,...t}=this.props;return o.createElement(o.Fragment,null,o.createElement("div",{ref:this.editorContentRef,...t}),o.createElement(a,{renderers:this.state.renderers}))}}const l=o.memo(d),c=(0,o.createContext)({onDragStart:void 0}),u=()=>(0,o.useContext)(c),p=o.forwardRef(((e,t)=>{const{onDragStart:n}=u(),r=e.as||"div";return o.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})}));class h{constructor(e,{editor:t,props:n={},as:o="div",className:r="",attrs:i}){this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(o),this.element.classList.add("react-renderer"),r&&this.element.classList.add(...r.split(" ")),i&&Object.keys(i).forEach((e=>{this.element.setAttribute(e,i[e])})),this.render()}render(){var e,t;const n=this.component,r=this.props;(function(e){return!("function"!==typeof e||!e.prototype||!e.prototype.isReactComponent)}(n)||function(e){var t;return!("object"!==typeof e||"Symbol(react.forward_ref)"!==(null===(t=e.$$typeof)||void 0===t?void 0:t.toString()))}(n))&&(r.ref=e=>{this.ref=e}),this.reactElement=o.createElement(n,{...r}),null===(t=null===(e=this.editor)||void 0===e?void 0:e.contentComponent)||void 0===t||t.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e,t;null===(t=null===(e=this.editor)||void 0===e?void 0:e.contentComponent)||void 0===t||t.removeRenderer(this.id)}}class m extends r.DK{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const e=e=>e.charAt(0).toUpperCase()+e.substring(1);this.component.displayName=e(this.extension.name)}const t=e=>{const t=this.component,n=this.onDragStart.bind(this);return o.createElement(o.Fragment,null,o.createElement(c.Provider,{value:{onDragStart:n,nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}}},o.createElement(t,{...e})))};t.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let n=this.node.isInline?"span":"div";this.options.as&&(n=this.options.as);const{className:r=""}=this.options;this.renderer=new h(t,{editor:this.editor,props:e,as:n,className:`node-${this.node.type.name} ${r}`.trim(),attrs:this.options.attrs})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}update(e,t){const n=e=>{this.renderer.updateProps(e)};if(e.type!==this.node.type)return!1;if("function"===typeof this.options.update){const o=this.node,r=this.decorations;return this.node=e,this.decorations=t,this.options.update({oldNode:o,oldDecorations:r,newNode:e,newDecorations:t,updateProps:()=>n({node:e,decorations:t})})}return e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,n({node:e,decorations:t})),!0}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.contentDOMElement=null}}function f(e,t){return n=>n.editor.contentComponent?new m(e,n,t):{}}const g=(e={},t=[])=>{const[n,r]=(0,o.useState)(null),i=function(){const[,e]=(0,o.useState)(0);return()=>e((e=>e+1))}(),{onBeforeCreate:a,onBlur:d,onCreate:l,onDestroy:c,onFocus:u,onSelectionUpdate:p,onTransaction:h,onUpdate:m}=e;return(0,o.useEffect)((()=>{n&&(a&&(n.off("beforeCreate"),n.on("beforeCreate",a)),d&&(n.off("blur"),n.on("blur",d)),l&&(n.off("create"),n.on("create",l)),c&&(n.off("destroy"),n.on("destroy",c)),u&&(n.off("focus"),n.on("focus",u)),p&&(n.off("selectionUpdate"),n.on("selectionUpdate",p)),h&&(n.off("transaction"),n.on("transaction",h)),m&&(n.off("update"),n.on("update",m)))}),[a,d,l,c,u,p,h,m]),(0,o.useEffect)((()=>{let t=!0;const n=new s(e);return r(n),n.on("transaction",(()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{t&&i()}))}))})),()=>{n.destroy(),t=!1}}),t),n}},42591:function(e,t,n){n.d(t,{ZP:function(){return d},q$:function(){return d}});var o=n(95152),r=n(35746),i=n(63444);function s(e){var t;const{char:n,allowSpaces:o,allowedPrefixes:r,startOfLine:s,$position:a}=e,d=(0,i.Ov)(n),l=new RegExp(`\\s${d}$`),c=s?"^":"",u=o?new RegExp(`${c}${d}.*?(?=\\s${d}|$)`,"gm"):new RegExp(`${c}(?:^)?${d}[^\\s${d}]*`,"gm"),p=(null===(t=a.nodeBefore)||void 0===t?void 0:t.isText)&&a.nodeBefore.text;if(!p)return null;const h=a.pos-p.length,m=Array.from(p.matchAll(u)).pop();if(!m||void 0===m.input||void 0===m.index)return null;const f=m.input.slice(Math.max(0,m.index-1),m.index),g=new RegExp(`^[${null===r||void 0===r?void 0:r.join("")}\0]?$`).test(f);if(null!==r&&!g)return null;const v=h+m.index;let y=v+m[0].length;return o&&l.test(p.slice(y-1,y+1))&&(m[0]+=" ",y+=1),v<a.pos&&y>=a.pos?{range:{from:v,to:y},query:m[0].slice(n.length),text:m[0]}:null}const a=new o.H$("suggestion");function d({pluginKey:e=a,editor:t,char:n="@",allowSpaces:i=!1,allowedPrefixes:d=[" "],startOfLine:l=!1,decorationTag:c="span",decorationClass:u="suggestion",command:p=(()=>null),items:h=(()=>[]),render:m=(()=>({})),allow:f=(()=>!0),findSuggestionMatch:g=s}){let v;const y=null===m||void 0===m?void 0:m(),C=new o.Sy({key:e,view(){return{update:async(e,n)=>{var o,r,i,s,a,d,l;const c=null===(o=this.key)||void 0===o?void 0:o.getState(n),u=null===(r=this.key)||void 0===r?void 0:r.getState(e.state),m=c.active&&u.active&&c.range.from!==u.range.from,f=!c.active&&u.active,g=c.active&&!u.active,C=f||m,x=!f&&!g&&c.query!==u.query&&!m,M=g||m;if(!C&&!x&&!M)return;const b=M&&!C?c:u,E=e.dom.querySelector(`[data-decoration-id="${b.decorationId}"]`);v={editor:t,range:b.range,query:b.query,text:b.text,items:[],command:e=>{p({editor:t,range:b.range,props:e})},decorationNode:E,clientRect:E?()=>{var n;const{decorationId:o}=null===(n=this.key)||void 0===n?void 0:n.getState(t.state),r=e.dom.querySelector(`[data-decoration-id="${o}"]`);return(null===r||void 0===r?void 0:r.getBoundingClientRect())||null}:null},C&&(null===(i=null===y||void 0===y?void 0:y.onBeforeStart)||void 0===i||i.call(y,v)),x&&(null===(s=null===y||void 0===y?void 0:y.onBeforeUpdate)||void 0===s||s.call(y,v)),(x||C)&&(v.items=await h({editor:t,query:b.query})),M&&(null===(a=null===y||void 0===y?void 0:y.onExit)||void 0===a||a.call(y,v)),x&&(null===(d=null===y||void 0===y?void 0:y.onUpdate)||void 0===d||d.call(y,v)),C&&(null===(l=null===y||void 0===y?void 0:y.onStart)||void 0===l||l.call(y,v))},destroy:()=>{var e;v&&(null===(e=null===y||void 0===y?void 0:y.onExit)||void 0===e||e.call(y,v))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(e,o,r,s){const{isEditable:a}=t,{composing:c}=t.view,{selection:u}=e,{empty:p,from:h}=u,m={...o};if(m.composing=c,a&&(p||t.view.composing)){!(h<o.range.from||h>o.range.to)||c||o.composing||(m.active=!1);const e=g({char:n,allowSpaces:i,allowedPrefixes:d,startOfLine:l,$position:u.$from}),r=`id_${Math.floor(4294967295*Math.random())}`;e&&f({editor:t,state:s,range:e.range})?(m.active=!0,m.decorationId=o.decorationId?o.decorationId:r,m.range=e.range,m.query=e.query,m.text=e.text):m.active=!1}else m.active=!1;return m.active||(m.decorationId=null,m.range={from:0,to:0},m.query=null,m.text=null),m}},props:{handleKeyDown(e,t){var n;const{active:o,range:r}=C.getState(e.state);return o&&(null===(n=null===y||void 0===y?void 0:y.onKeyDown)||void 0===n?void 0:n.call(y,{view:e,event:t,range:r}))||!1},decorations(e){const{active:t,range:n,decorationId:o}=C.getState(e);return t?r.EH.create(e.doc,[r.p.inline(n.from,n.to,{nodeName:c,class:u,"data-decoration-id":o})]):null}}});return C}},86914:function(e,t,n){n.d(t,{p:function(){return i}});var o=n(97458),r=n(54514);const i=e=>(0,o.jsx)(r.J,{viewBox:"0 0 24 24",...e,fill:"none",children:(0,o.jsx)("path",{d:"m13.41 12 6.3-6.29a1.004 1.004 0 0 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 1 0-1.42 1.42l6.3 6.29-6.3 6.29a.999.999 0 0 0 0 1.42 1 1 0 0 0 1.42 0l6.29-6.3 6.29 6.3a1.001 1.001 0 0 0 1.639-.325 1 1 0 0 0-.22-1.095L13.41 12Z",fill:"currentColor"})})},68411:function(e,t,n){n.d(t,{$:function(){return i}});var o=n(97458),r=n(54514);const i=e=>(0,o.jsx)(r.J,{viewBox:"0 0 24 24",...e,fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 15.5a1 1 0 0 1-.67-.26l-5-4.5 1.34-1.48L12 13.15l4.33-3.9 1.34 1.49-5 4.5a1 1 0 0 1-.67.26z",fill:"currentColor"})})}}]);