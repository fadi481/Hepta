"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11332],{92695:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(52983);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:31435023845,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sessionStorage;const{0:r,1:l}=(0,o.useState)(s(e));function a(){null===s(e)&&c(t)}function s(e){const t=i.getItem(e);if(!t)return null;const n=JSON.parse(t);return(new Date).getTime()>(null===n||void 0===n?void 0:n.expiry)?(i.removeItem(e),null):(null===n||void 0===n?void 0:n.value)||null}function u(e,t){return i.setItem(e,t)}function c(t){const o={value:t,expiry:(new Date).getTime()+86123353*n};l(t),u(e,JSON.stringify(o))}function d(){c(null),i.removeItem(e)}return(0,o.useEffect)((()=>{a()}),[]),{value:r,set:c,remove:d}}},1046:function(e,t,n){n.d(t,{G:function(){return a},ui:function(){return s}});var o=n(84493),i=n(52983),r=n(97458);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const a={text:"",position:{x:0,y:0},timecode:0,isShowing:!1},s=(0,i.createContext)({annotationForm:a,setAnnotationForm:()=>new Error("Not implemented")});t.ZP=e=>{let{children:t}=e;const{0:n,1:u}=(0,i.useState)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a)),c=(0,i.useMemo)((()=>({annotationForm:n,setAnnotationForm:u})),[n,u]);return(0,r.jsx)(s.Provider,{value:c,children:t})}},54255:function(e,t,n){n.d(t,{BJ:function(){return u},Jk:function(){return l},PI:function(){return s},d$:function(){return c},hq:function(){return i},kG:function(){return a},kv:function(){return r}});var o=n(23008);const i=(e,t)=>{let{x:n,y:o}=e,{height:i,width:r}=t;return{x:Math.min(1,Math.max(0,n/r)),y:Math.min(1,Math.max(0,o/i))}},r=(e,t)=>{let{x:n,y:o}=e,{height:i,width:r}=t;return{x:n*r,y:o*i}},l=(e,t)=>{t&&(t.currentTime=e,t.pause())},a=e=>{let{x:t,y:n}=e;return{x:parseFloat(t.toFixed(3)),y:parseFloat(n.toFixed(3))}},s=()=>{if(/(MSIE|Trident|Edge)/.test(navigator.userAgent)){const e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}else window.dispatchEvent(new Event("resize"))},u=(e,t)=>!!t&&(0,o.lz)(t,e),c=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=document.querySelector(`#anchor_${e.split("/").pop()}`);n&&(t?n.classList.add("is--highlighted"):n.classList.remove("is--highlighted"));const o=document.querySelector(`#comment_${e.split("/").pop()}`);o&&(t?o.classList.add("is--highlighted"):o.classList.remove("is--highlighted"))}},23008:function(e,t,n){n.d(t,{DU:function(){return l},kV:function(){return i},rJ:function(){return r},lz:function(){return s}});const o=((e,t,n)=>{"string"!==typeof n&&(n=String(n));return`${Array(t).fill(e).join("")}${n}`.slice(-1*t)}).bind(null,"0",2),i=e=>{if(!e)return"00:00";const t=Math.floor(e/3600),n=o(Math.floor(e%3600/60)),i=o(Math.floor(e%60));return t?`${t}:${n}:${i}`:`${n}:${i}`},r=(e,t)=>Math.round(e*t)/t,l=(e,t)=>Math.round(e/t*100),a=(e,t)=>{const n=+e+t/2;return n-n%+t},s=(e,t)=>a(e,.01)===a(t,.01)},4080:function(e,t,n){n.d(t,{rp:function(){return P},ur:function(){return j},kN:function(){return I},j$:function(){return w},FJ:function(){return f},CU:function(){return T},eM:function(){return y},Rn:function(){return v},wV:function(){return g},z3:function(){return _},YA:function(){return C},V5:function(){return R},I8:function(){return h},jb:function(){return O},Q4:function(){return E},Mm:function(){return L},u2:function(){return D},Vk:function(){return S},s_:function(){return b}});var o=n(53106),i=n(43831),r=n(74145),l=n(95616),a=n(74133),s=n(62481),u=n(84493),c=n(63444);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=c.NB.create({name:"docMetadata",group:"block",addAttributes(){var e;return m(m({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{mentionsPopup:{default:!1}})},parseHTML:()=>[{tag:"docMetadata"}],renderHTML(e){let{HTMLAttributes:t}=e;return["docMetadata",(0,c.P1)(t)]}});const v="video_review_loggedout_name",y="video_review_loggedout_email",g="video_review_loggedout_guest_user_id",_="video_review_loggedout_guest_user_jwt",f="loggedout_user_comment",h="loggedout_user_comment_richtext",O="loggedout_user_comment_uri",w={small:480,medium:769,mediumLarge:1130,large:1280},b=36,S="linear-gradient(0deg, rgba(193, 173, 237, 0.25) 0%, rgba(193, 173, 237, 0.25) 100%), #FFF",E=[o.ZP,i.Z,s.Z,r.Z,l.Z,a.Z,p],C=1,j="https://i.vimeocdn.com/portrait/defaults-blue_75x75.png",P="https://i.vimeocdn.com/portrait/defaults-gray_75x75.png",T=/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/,I={clipViewer:"Clip Viewer"},R={Admin:"Admin",Owner:"Owner"},D={Pending:"pending"},L=["applicablePermissionPolicies.name","applicablePermissionPolicies.uri","applicablePermissionPolicies.permissionActions","entity.user","entity.teamUser","entity.guestUser","entity.teamUser.user.pictures","currentPermissions"]},51876:function(e,t,n){n.d(t,{ZP:function(){return z}});var o=n(52983),i=n(12333),r=n(43544),l=n(17592),a=n(84493),s=n(63582),u=n(92695),c=n(90203),d=n(27244),m=n(96638),p=n(36966);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){const{mutate:e}=(0,m.kY)();let{baseUrl:t,jwt:n,xVimeoPage:i,locale:r}=(0,p.r)(),[l,a]=(0,c.AC)();return[(0,o.useCallback)((async o=>{a({type:"REQUEST"});try{let l=await e(`/guest_users${(0,c.Y$)(o)}`,(0,d.f)(y(y({},o),{},{baseUrl:t,headers:y(y({},o.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${i}`,"Accept-Language":r??"en"})})),!1);a({type:"SUCCESS",payload:l})}catch(l){a({type:"FAILURE",payload:l})}}),[t,i,n,r,a]),l]}"true"===n(73656).env.STORYBOOK&&(0,c.MR)(g,{endpoint:"/guest_users",method:"POST"});var _=n(54255),f=n(23008),h=n(41555);const O=e=>{const t=(t,n)=>{e({type:h.FZ,payload:n,meta:{paused:t.paused,duration:t.duration,percent:(0,f.DU)(n,t.duration)}})};return{beginAnnotation:t=>{e({type:h.DU,payload:t})},cancelAnnotation:()=>{e({type:h.qi})},clearCommentInProgress:()=>{e({type:h.Sw,payload:null})},initVideo:n=>{const o=document.querySelector(".js-player"),i=e=>t(n,e.seconds);n.addEventListener("timeupdate",i),n.addEventListener("pause",i),n.addEventListener("play",(e=>{e&&e.seconds&&t(n,e.seconds)})),n.addEventListener("ended",i),window.BigScreen&&o&&(window.BigScreen.on("enter",(()=>(t=>{e({type:h.c9,payload:t})})(o))),window.BigScreen.on("exit",(()=>(t=>{e({type:h.Sb,payload:t})})(o)))),e({type:h.JF,payload:{player:n},meta:{duration:n.duration}})},onAnnotationDrag:t=>{e({type:h.Qy,payload:t})},onAnnotationDragStart:()=>{e({type:h.cu})},onAnnotationDragStop:()=>{e({type:h.qq})},resetPlayerTime:()=>{e({type:h.Hu})},setTimecodedCommentInProgress:t=>{e({type:h.Sw,payload:t})},updateVideoTime:t,updateCuePoints:t=>{e({type:h.EM,payload:t})}}};var w=n(4080),b=n(10392),S=n(8262),E=n(69628);const C=["name"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T={time_code:0,coordinates:{x:0,y:0},app_origin:"svv"},I=async(e,t,n,o)=>{try{const i=await fetch(`//${t.apiUrl}${n}${(0,E.ko)(n)}`,{method:"PATCH",headers:{Authorization:`jwt ${t.jwt}`,"Content-Type":"application/json","Vimeo-Page":o,Accept:"application/vnd.vimeo.*+json;version=3.4.10"},body:e}),r=await i.json();if(r.error)throw new Error(r.error);return(0,S.uo)(r)}catch(i){return null}},R=async(e,t,n)=>{try{const o=await fetch(`//${t.apiUrl}${n}${(0,E.ko)(n)}`,{method:"POST",headers:P(P({},null!==t&&void 0!==t&&t.jwt?{Authorization:`jwt ${t.jwt}`}:{}),{},{"Content-Type":"application/json",Accept:"application/vnd.vimeo.*+json;version=3.4.10"}),body:e}),i=await o.json();if(i.error)throw new Error(i.error);return(0,S.uo)(i)}catch(o){throw new Error(o)}},D=async(e,t,n,o,i,r,l)=>{const a=t?{richtext:t}:{text:e},s=JSON.stringify(P(P(P(P(P({},T),a),i?{name:i}:{}),r?{guest_user_id:r}:{}),{},{app_origin:l?"viewer_home":"svv"}));return await R(s,n,o)},L=async(e,t)=>{try{const n=await fetch(e,{method:"GET",headers:{Authorization:`jwt ${t.jwt}`,"Content-Type":"application/json",Accept:"application/vnd.vimeo.*+json;version=3.4.10"}}),o=await n.json();if(o.error)throw new Error(o.error);return(0,S.uo)(o)}catch(n){return null}};var x=n(56211),U=n(44125),A=n(95996),M=n(29670);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $=(e,t,n,i,r)=>{const l=(0,s.q)(),a=(0,M.no)(),{set:c,remove:d}=(0,u.Z)(w.eM,null,void 0,a),{value:m,set:p}=(0,u.Z)(w.wV,null,void 0,a),{value:v,set:y,remove:h}=(0,u.Z)(w.Rn,null,void 0,a),{value:S,set:j}=(0,u.Z)(w.z3,null,void 0,a),{value:N,set:$,remove:Z}=(0,u.Z)(w.FJ,null,void 0,a),{value:G,set:F,remove:V}=(0,u.Z)(w.I8,null,void 0,a),{value:q,set:J,remove:Y}=(0,u.Z)(w.jb,null,void 0,a),z=O(t),B=e.context===U.Ux.Recipient&&!(null!==n&&void 0!==n&&n.isSimplifiedSite),[H,{loading:Q,error:K,data:W}]=g(),{0:X,1:ee}=(0,o.useState)(m),{0:te,1:ne}=(0,o.useState)({text:"",richtextEditor:null,viewer:{},uri:"",guestName:null,isReply:!1});(0,o.useEffect)((()=>{K&&(async()=>{const e=null===K||void 0===K?void 0:K.res;if(!e.bodyUsed){const n=await e.json();if(n.error_code){switch(n.error_code){case U.Zk.EMAIL_ALREADY_EXIST:pe(U.Zk.EMAIL_ALREADY_EXIST);break;case U.Zk.INVALID_EMAIL_ADDRESS:pe(U.Zk.INVALID_EMAIL_ADDRESS);break;default:pe(U.Zk.TOO_MANY_REQUESTS)}te.isReply?t({type:U.L9.SetAddReplyState,payload:{state:U.c1.Error}}):t({type:U.L9.SetAddCommentState,payload:U.c1.Error}),h(),d(),t({type:U.L9.SetGuestName,payload:""})}}})()}),[K]),(0,o.useEffect)((()=>{S&&t({type:U.L9.SetGuestUserJwt,payload:S})}),[]),(0,o.useEffect)((()=>{if(!Q&&W){j(null===W||void 0===W?void 0:W.metadata.interactions.comments),null!==W&&void 0!==W&&W.metadata.interactions.comments&&t({type:U.L9.SetGuestUserJwt,payload:null===W||void 0===W?void 0:W.metadata.interactions.comments});let e=(0,A.r$)(null===W||void 0===W?void 0:W.uri);ee(e),p(e)}}),[W,Q,d,h,t,p]),(0,o.useEffect)((()=>{(async()=>{let{text:e,richtextEditor:t,viewer:n,uri:o,guestName:i,isReply:r}=te;if(X&&(e||t)){me(!1);const l=r?le:re;await l(e,t,n,o,i,X)}})()}),[X]);const oe=async(o,i)=>{var r,l,a;o&&t({type:U.L9.SetVideo,payload:o});const s=null===(r=o??e.video)||void 0===r||null===(l=r.metadata)||void 0===l?void 0:l.connections,u=(0,A._T)(o??e.video),c=(0,A.QK)(o??e.video);let d=(0,A.yT)(n,null===s||void 0===s||null===(a=s.privateComments)||void 0===a?void 0:a.uri,u,i);if(!d||!n)return;if(!c&&e.context===U.Ux.Recipient)return;t({type:U.L9.FetchCommentsInit,payload:!0});const m=await L(d,n);t({type:U.L9.FetchCommentsComplete,payload:{comments:m}})},ie=e=>{var t;const n=(null===i||void 0===i||null===(t=i.privacy)||void 0===t?void 0:t.view)??"",o="nobody"===n||"anybody"===n;return(0,E.zS)(e)&&o&&(e.commands.focus("end"),e.commands.deleteNode("docMetadata"),e.commands.insertContent({type:"docMetadata",attrs:{mentionsPopup:!0}})),JSON.stringify(e.getJSON())},re=async(n,o,i,r,l,a,s)=>{let u=o?ie(o):"";s&&(u=s);try{var c,d,m,p,v,y,g;const s=await D(n,u,i,r,l,a,B);t({type:U.L9.SetGuestName,payload:l});const _={isReply:!1,existingReplyCount:0,isTimeCoded:!1,commentOwnerId:null!==s&&void 0!==s&&s.user?(0,E._G)(null===s||void 0===s?void 0:s.user.uri):-1,commentId:(0,A.r$)(s.uri),viewer:i,videoId:(null===(c=e.video)||void 0===c?void 0:c.id)||-1,videoOwnerId:(0,E.a)((null===(d=e.video)||void 0===d||null===(m=d.user)||void 0===m?void 0:m.uri)||""),videoPrivacy:null===(p=e.video)||void 0===p||null===(v=p.privacy)||void 0===v?void 0:v.view,uploaderId:(0,A.kY)((null===(y=e.video)||void 0===y||null===(g=y.uploader)||void 0===g?void 0:g.link)||""),context:e.context,isMention:!1,commentLength:0};if(null!==s&&void 0!==s&&s.richtext){const{commentLength:e,isMention:t}=(0,E.oj)(JSON.parse(null===s||void 0===s?void 0:s.richtext));_.commentLength=e,_.isMention=t}else n&&(_.commentLength=n.length);(0,x.TC)(_),o&&(o.commands.clearContent(),o.commands.blur()),await oe(),t({type:U.L9.CommentAdded,payload:s})}catch(_){t({type:U.L9.SetAddCommentState,payload:U.c1.Error})}},le=async(n,o,i,r,l,a,s)=>{let u=o?ie(o):"";s&&(u=s);try{var c,d,m,p,v,y,g;const s=await D(n,u,i,r,l,a,B),_={isReply:!0,existingReplyCount:e.existingReplyCount,isTimeCoded:!1,commentOwnerId:null!==s&&void 0!==s&&s.user?(0,E._G)(null===s||void 0===s?void 0:s.user.uri):-1,commentId:(0,A.r$)(s.uri),viewer:i,videoId:(null===(c=e.video)||void 0===c?void 0:c.id)||-1,videoOwnerId:(0,E.a)((null===(d=e.video)||void 0===d||null===(m=d.user)||void 0===m?void 0:m.uri)||""),videoPrivacy:null===(p=e.video)||void 0===p||null===(v=p.privacy)||void 0===v?void 0:v.view,uploaderId:(0,A.kY)((null===(y=e.video)||void 0===y||null===(g=y.uploader)||void 0===g?void 0:g.link)||""),context:e.context,isMention:!1,commentLength:0};if(null!==s&&void 0!==s&&s.richtext){const{commentLength:e,isMention:t}=(0,E.oj)(JSON.parse(null===s||void 0===s?void 0:s.richtext));_.commentLength=e,_.isMention=t}else n&&(_.commentLength=n.length);(0,x.TC)(_),o&&(o.commands.clearContent(),o.commands.blur()),oe(),t({type:U.L9.ReplyAdded,payload:s})}catch(_){t({type:U.L9.SetAddReplyState,payload:{state:U.c1.Error}})}},ae=e=>{t({type:U.L9.RequestSetCommentsVisibility,payload:e})},se=e=>{t({type:U.L9.SetRichCommentText,payload:e})},ue=e=>{t({type:U.L9.SetCommentToDelete,payload:e})},ce=e=>{t({type:U.L9.SetDeepLinkedCommentId,payload:e})},de=e=>{t({type:U.L9.SetDeepLinkedReplyId,payload:e})},me=e=>{t({type:U.L9.SetGuestModalVisibility,payload:e})},pe=e=>{t({type:U.L9.SetGuestModalEmailExistError,payload:e})},ve=()=>{V(),Y(),Z()};return k({setCommentText:e=>{t({type:U.L9.SetCommentText,payload:e})},setRichCommentText:se,setCommentToDelete:ue,setDeepLinkedCommentId:ce,setDeepLinkedReplyId:de,fetchComments:oe,fetchMoreComments:async function(){var o,i,r,l;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";if(null===e||void 0===e||null===(o=e.comments)||void 0===o||null===(i=o.paging)||void 0===i||!i[a]||!n)return;t({type:U.L9.FetchCommentsInit,payload:!0});const s=await L(`//${n.apiUrl}${null===e||void 0===e||null===(r=e.comments)||void 0===r||null===(l=r.paging)||void 0===l?void 0:l[a]}`,n);t({type:U.L9.FetchCommentsComplete,payload:{comments:s}})},addComment:async(o,i,r,l)=>{var a,s,u;const d=o||e.guestName||v,p=null===(a=e.video)||void 0===a||null===(s=a.metadata.connections)||void 0===s||null===(u=s.privateComments)||void 0===u?void 0:u.uri;if(!n||!n.user){if(!d){if(me(!0),r){const e=JSON.stringify(null===r||void 0===r?void 0:r.getJSON());F(e)}return e.commentText&&$(e.commentText),void J(p)}y(d),i&&c(i),ve()}if(null!==n&&p){if(t({type:U.L9.SetAddCommentState,payload:U.c1.Requesting}),!m&&o&&i&&!n.user)return await H({select:["uri","metadata.interactions.comments"],variables:{name:o,email:i}}),void ne({text:e.commentText,richtextEditor:r,viewer:n,uri:p,guestName:d,isReply:!1});re(e.commentText,r,n,p,d,m)}},addTimecodedComment:async(o,i,r)=>{var l,a,s;const u=o.name||e.guestName||v;if(!n||!n.user){if(!u)return z.setTimecodedCommentInProgress(k(k({},o),{},{name:null})),void me(!0);t({type:U.L9.SetGuestName,payload:u}),y(u),z.setTimecodedCommentInProgress(null),me(!1)}const c=null===(l=e.video)||void 0===l||null===(a=l.metadata.connections)||void 0===a||null===(s=a.privateComments)||void 0===s?void 0:s.uri;if(null===n||!c)return;t({type:U.L9.SetAddCommentState,payload:U.c1.Requesting});const d={text:i?"":o.text,richtext:i?ie(i):void 0,coordinates:(0,_.kG)({x:o.x,y:o.y}),time_code:(0,f.rJ)(o.timecode,1e3),name:u};try{var m,p,g,h,O,w,S;const r=await(async(e,t,n,o)=>{const{name:i}=e,r=(0,b.Z)(e,C),l=i?e:r,a=JSON.stringify(P(P(P({},T),l),{},{app_origin:o?"viewer_home":"svv"}));return await R(a,t,n)})(d,n,c,B),l={isReply:!1,existingReplyCount:0,isTimeCoded:!0,commentOwnerId:null!==r&&void 0!==r&&r.user?(0,E._G)(null===r||void 0===r?void 0:r.user.uri):-1,commentId:(0,A.r$)(r.uri),viewer:n,videoId:(null===(m=e.video)||void 0===m?void 0:m.id)||-1,videoOwnerId:(0,E.a)((null===(p=e.video)||void 0===p||null===(g=p.user)||void 0===g?void 0:g.uri)||""),videoPrivacy:null===(h=e.video)||void 0===h||null===(O=h.privacy)||void 0===O?void 0:O.view,uploaderId:(0,A.kY)((null===(w=e.video)||void 0===w||null===(S=w.uploader)||void 0===S?void 0:S.link)||""),context:e.context,isMention:!1,commentLength:0};if(null!==r&&void 0!==r&&r.richtext){const{commentLength:e,isMention:t}=(0,E.oj)(JSON.parse(null===r||void 0===r?void 0:r.richtext));l.commentLength=e,l.isMention=t}else o.text&&(l.commentLength=o.text.length);(0,x.TC)(l),oe(),o.richtext&&se(""),i&&(i.commands.clearContent(),i.commands.blur()),t({type:U.L9.CommentAdded,payload:r})}catch(j){t({type:U.L9.SetAddCommentState,payload:U.c1.Error})}},onCloseGuestModal:()=>{e.video&&((0,x.AA)(e.video,!1),me(!1))},onCommentSignUp:e=>{let{signup:t}=e;(0,x.cu)(i,t),setTimeout((()=>{window.location.reload()}),20)},requestSetCommentsVisibility:ae,dismissReviewUpsell:()=>{t({type:U.L9.DismissReviewUpsell,payload:!0})},setIsAddCommentModalOpen:e=>{t({type:U.L9.SetIsAddCommentModalOpen,payload:e})},selectComment:(e,n)=>{t({type:U.L9.SelectComment,payload:e,meta:{target:n?n.target:null}})},updateAnnotationPosition:async(e,o)=>{if(null!==n)try{const i=await(async(e,t,n,o)=>{const i=JSON.stringify(t);return await I(i,n,e,o)})(e,{coordinates:(0,_.kG)(o)},n,l);t({type:U.L9.CommentUpdated,payload:i})}catch(i){}},addReply:async(o,i,r,l,a)=>{const s=r||e.guestName||v,u=`${o.uri}/replies?fields=uri,text,user,text_decorations,metadata,richtext,guest_user_uri`;if(!n||!n.user){if(!s){if(me(!0),a){const e=JSON.stringify(null===a||void 0===a?void 0:a.getJSON());F(e)}return i&&$(i),J(u),void t({type:U.L9.SetReplyInProgress,payload:{parentComment:o,text:i}})}t({type:U.L9.SetGuestName,payload:s}),y(s),l&&c(l),ve()}if(null!==n&&u){if(t({type:U.L9.SetAddReplyState,payload:{state:U.c1.Requesting,uri:o.uri}}),!m&&r&&l&&!n.user)return await H({select:["uri","metadata.interactions.comments"],variables:{name:r,email:l}}),void ne({text:i,richtextEditor:a,viewer:n,uri:u,guestName:s,isReply:!0});le(i,a,n,u,s,m)}},updateCommentStatus:async(e,o)=>{const i=e.uri;if(null===n||!i)return;const r=await(async(e,t,n,o)=>{const i=JSON.stringify({status:e});return await I(i,t,n,o)})(o,n,i,l);t({type:U.L9.CommentUpdated,payload:r,meta:{field:"status"}})},handleStashedComments:()=>{(G||N)&&q&&(async()=>{if(null!==n&&void 0!==n&&n.user&&!v&&(G||N)&&q){const e=(null===q||void 0===q?void 0:q.includes("replies"))?le:re;await e(N,void 0,n,q,void 0,void 0,G),ve()}})()},handleDeepLinkedComment:e=>{var t;const n=new URLSearchParams(e);n.has("comment")&&ae(!0);const o=null===(t=n.get("comment"))||void 0===t?void 0:t.toString();o&&ce(o)},handleDeepLinkedReply:e=>{var t;const n=new URLSearchParams(e);n.has("reply")&&ae(!0);const o=null===(t=n.get("reply"))||void 0===t?void 0:t.toString();o&&de(o)},requestDeleteComment:()=>{t({type:U.L9.SetDeleteCommentState,payload:{state:U.Rg.Requesting}})},completeDeleteComment:e=>{t({type:U.L9.SetDeleteCommentState,payload:{state:U.Rg.Complete,uri:e}}),setTimeout((()=>{t({type:U.L9.ResetDeleteCommentState})}),1e3),ue(null),oe()},errorDeleteComment:()=>{t({type:U.L9.SetDeleteCommentState,payload:{state:U.Rg.Error}})},enableComments:async e=>{await r(e),t({type:U.L9.SetCommentsEnabled,payload:e})},setIsReply:e=>{t({type:U.L9.SetIsReply,payload:e})},setExistingReplyCount:e=>{t({type:U.L9.SetExistingReplyCount,payload:e})},setGuestModalEmailErrorCode:pe,setGuestUserJwt:e=>{t({type:U.L9.SetGuestUserJwt,payload:e})}},z)};var Z=n(91653);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const V=e=>e?e.uris.filter((t=>e.byUri[t].timeCode)).map((t=>{const n=e.byUri[t];return{visible:n.status!==U.t.Closed,timecode:n.timeCode,id:n.uri}})):[],q={[U.L9.CommentAdded]:(e,t)=>F(F({},e),{},{addCommentState:U.c1.Success,commentText:"",isRequestedToShow:!0,isCommentsShowing:!0,guestCommentUris:e.guestName?[...e.guestCommentUris,t.payload.uri]:e.guestCommentUris,activeCommentUri:t.payload.timeCode?t.payload.uri:null}),[U.L9.CommentUpdated]:(e,t)=>{var n;const o=((e,t)=>e.comments?F(F({},e.comments),{},{byUri:F(F({},e.comments.byUri),{},{[t.uri]:t})}):null)(e,t.payload);return F(F({},e),{},{comments:o,stage:"status"===(null===(n=t.meta)||void 0===n?void 0:n.field)?F(F({},e.stage),{},{cuePoints:V(o)}):e.stage})},[U.L9.FetchCommentsComplete]:(e,t)=>{const n=((e,t)=>{var n;if(!t)return e.comments;const o=[...t.data];let i;return o.reverse(),e.comments&&1!==t.page?(i=null===(n=e.comments)||void 0===n?void 0:n.uris,t.page>e.comments.page?i=[...(0,A.xZ)(o),...e.comments.uris]:t.page<e.comments.page&&(i=[...e.comments.uris,...(0,A.xZ)(o)]),F(F({},t),{},{uris:i,byUri:F(F({},e.comments.byUri),(0,A.T2)(o))})):F(F({},t),{},{uris:(0,A.xZ)(o),byUri:(0,A.T2)(o)})})(e,t.payload.comments);return F(F({},e),{},{comments:n,isFetchingComments:!1,stage:F(F({},e.stage),{},{cuePoints:V(n)})})},[U.L9.FetchCommentsInit]:(e,t)=>F(F({},e),{},{isFetchingComments:!0}),[U.L9.ReplyAdded]:(e,t)=>F(F({},e),{},{addReplyState:{state:U.c1.Success},isRequestedToShow:!0,isCommentsShowing:!0,guestCommentUris:e.guestName?[...e.guestCommentUris,t.payload.uri]:e.guestCommentUris}),[U.L9.RequestSetCommentsVisibility]:(e,t)=>F(F({},e),{},{isRequestedToShow:t.payload,isCommentsShowing:e.isGuestModalShowing||t.payload}),[U.L9.ResetGuestComments]:(e,t)=>F(F({},e),{},{guestCommentUris:t.payload}),[U.L9.SelectComment]:(e,t)=>F(F({},e),{},{activeCommentUri:t.payload}),[U.L9.SetAddCommentState]:(e,t)=>F(F({},e),{},{addCommentState:t.payload,isCommentsShowing:e.isGuestModalShowing||e.isRequestedToShow}),[U.L9.SetAddReplyState]:(e,t)=>F(F({},e),{},{addReplyState:t.payload}),[U.L9.SetCommentText]:(e,t)=>F(F({},e),{},{commentText:t.payload}),[U.L9.SetRichCommentText]:(e,t)=>F(F({},e),{},{richCommentText:t.payload}),[U.L9.SetCommentToDelete]:(e,t)=>F(F({},e),{},{commentToDelete:t.payload}),[U.L9.SetDeleteCommentState]:(e,t)=>{let n=e.guestCommentUris;if(t.payload.uri&&(n=e.guestCommentUris.filter((e=>e!==t.payload.uri))),t.payload.state===U.Rg.Complete){var o,i;const r=(null===(o=e.comments)||void 0===o?void 0:o.uris.filter((t=>{var n;return t!==(null===(n=e.deleteCommentState)||void 0===n?void 0:n.uri)})))??[];return F(F({},e),{},{comments:F(F({},e.comments),{},{total:(null===(i=e.comments)||void 0===i?void 0:i.total)||0,uris:r}),deleteCommentState:t.payload,guestCommentUris:n})}return F(F({},e),{},{deleteCommentState:t.payload,guestCommentUris:n})},[U.L9.ResetDeleteCommentState]:(e,t)=>{var n;return(null===(n=e.deleteCommentState)||void 0===n?void 0:n.state)===U.Rg.Complete?F(F({},e),{},{deleteCommentState:null}):e},[U.L9.SetGuestModalVisibility]:(e,t)=>F(F({},e),{},{isGuestModalShowing:t.payload}),[U.L9.SetGuestModalEmailExistError]:(e,t)=>F(F({},e),{},{guestModalEmailErrorCode:t.payload}),[U.L9.SetGuestName]:(e,t)=>F(F({},e),{},{guestName:t.payload}),[U.L9.SetIsAddCommentModalOpen]:(e,t)=>F(F({},e),{},{isAddCommentModalOpen:t.payload}),[U.L9.SetReplyInProgress]:(e,t)=>F(F({},e),{},{replyInProgress:t.payload}),[U.L9.DismissReviewUpsell]:e=>F(F({},e),{},{reviewUpsellDismissed:!0}),[U.L9.SetVideo]:(e,t)=>F(F({},e),{},{video:t.payload}),[U.L9.SetDeepLinkedCommentId]:(e,t)=>F(F({},e),{},{deepLinkedCommentId:t.payload}),[U.L9.SetDeepLinkedReplyId]:(e,t)=>F(F({},e),{},{deepLinkedReplyId:t.payload}),[U.L9.SetCommentsEnabled]:(e,t)=>{let{payload:n}=t;return F(F({},e),{},{isCommentsEnabled:n})},[U.L9.SetIsReply]:(e,t)=>{let{payload:n}=t;return F(F({},e),{},{isReply:n})},[U.L9.SetExistingReplyCount]:(e,t)=>{let{payload:n}=t;return F(F({},e),{},{existingReplyCount:n})},[U.L9.SetGuestUserJwt]:(e,t)=>{let{payload:n}=t;return F(F({},e),{},{guestUserJwt:n})}},J=(e,t)=>{const n=Z.w2[t.type];if(n)return F(F({},e),{},{stage:n(e.stage,t)});const o=q[t.type];return o?o(e,t):e};var Y=n(97458);var z=function(e){let{context:t,videoData:n,children:a}=e;const s=(0,o.useContext)(i.Z),{0:u,1:c}=(0,o.useReducer)(J,(0,l.Hi)(t,n)),{patchPrivateCommentsSetting:d}=(0,r.e)(n),m=$(u,c,s,n,d),p=(0,o.useRef)(!0);return(0,o.useEffect)((()=>{if(p.current)m.fetchComments(),p.current=!1;else{var e;const t=u.context===U.Ux.Recipient&&!1===(null===s||void 0===s?void 0:s.isSimplifiedSite);(0,x.zI)((null===n||void 0===n?void 0:n.id)||0,null===n||void 0===n||null===(e=n.privacy)||void 0===e?void 0:e.view,s,t)}}),[u.isCommentsShowing]),(0,o.useEffect)((()=>{m.handleDeepLinkedComment(window.location.search),m.handleDeepLinkedReply(window.location.search),m.handleStashedComments()}),[]),(0,Y.jsx)(l.A2.Provider,{value:m,children:(0,Y.jsx)(l.yC.Provider,{value:u,children:a})})}},41555:function(e,t,n){n.d(t,{DU:function(){return o},EM:function(){return v},FZ:function(){return u},Hu:function(){return m},JF:function(){return s},Qy:function(){return r},Sb:function(){return d},Sw:function(){return p},c9:function(){return c},cu:function(){return l},qi:function(){return i},qq:function(){return a}});const o="ANNOTATION_BEGIN",i="ANNOTATION_CANCEL",r="ANNOTATION_DRAG",l="ANNOTATION_DRAG_START",a="ANNOTATION_DRAG_STOP",s="VIDEO_INIT",u="VIDEO_TIMEUPDATE",c="VIDEO_FULLSCREEN_ENTER",d="VIDEO_FULLSCREEN_EXIT",m="RESET_PLAYER_TIME",p="SET_COMMENT_IN_PROGRESS",v="UPDATE_CUE_POINTS"},91653:function(e,t,n){n.d(t,{Jz:function(){return u},Y6:function(){return a},iT:function(){return s},w2:function(){return c}});var o=n(84493),i=n(41555);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a={isDragging:!1,paused:!0,duration:0,percent:0,playerTime:null,cuePoints:[],isScrubbing:!1,playerStyles:"",player:null,commentInProgress:null},s=e=>{var t;null===(t=e.cuePoints)||void 0===t||t.forEach((t=>{try{e.removeCuePoint(t.id)}catch(n){}}))},u=(e,t)=>{e&&(s(e),null===t||void 0===t||t.forEach((t=>{try{e.addCuePoint(t.timecode,{visible:t.visible,timecode:t.timecode,id:t.id})}catch(n){}})))},c={[i.JF]:(e,t)=>{let{payload:n,meta:o}=t;return l(l({},e),{},{duration:o.duration,player:n.player})},[i.cu]:e=>l(l({},e),{},{isDragging:!0}),[i.qq]:e=>l(l({},e),{},{isDragging:!1}),[i.FZ]:(e,t)=>{let{payload:n,meta:o}=t;return l(l({},e),{},{playerTime:n,paused:o.paused,percent:o.percent,duration:o.duration})},[i.Hu]:e=>a,[i.Sw]:(e,t)=>{let{payload:n}=t;return l(l({},e),{},{commentInProgress:n})},[i.EM]:(e,t)=>{let{payload:n}=t;return l(l({},e),{},{cuePoints:n})}}},94024:function(e,t,n){n.d(t,{Hi:function(){return i},U9:function(){return a},VZ:function(){return l}});var o=n(52983);const i=()=>({mentionProps:null,editor:null,isMentionsActive:!1,mentionListRef:null,loadingMentions:!1,registeredKeyDownHandlers:[],mentionsList:[],mentionedUsers:[],mentionedOwner:null,currentTeamUser:null,searchMentionQuery:""}),r={setRichTextEditor:()=>null,setIsMentionsActive:()=>null,setMentionedOwner:()=>null,setCurrentTeamUser:()=>null,setMentionListRef:()=>null,setLoadingMentions:()=>null,setMentionsList:()=>null,setMentionedUsers:()=>null,grantAccessToMentionedUsers:()=>null,showMentionsPopover:()=>!1,openPrivacyDrawer:()=>null,registerKeyDownHandler:()=>null,unregisterKeyDownHandler:()=>null,setMentionProps:()=>null,setSearchMentionQuery:()=>null},l=(0,o.createContext)(i()),a=(0,o.createContext)(r);l.displayName="RichCommentState",a.displayName="RichCommentDispatcher"},29670:function(e,t,n){n.d(t,{no:function(){return r}});var o=n(84493);class i{constructor(){(0,o.Z)(this,"storage",new Map)}static getInstance(){return i.instance||(i.instance=new i),i.instance}get length(){return this.storage.size}clear(){this.storage.clear()}getItem(e){return this.storage.get(e)??null}key(e){const t=Array.from(this.storage.keys());return t.length>e?t[e]:null}removeItem(e){this.storage.delete(e)}setItem(e,t){this.storage.set(e,t)}}function r(){let e;return e=function(e){let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){return!1}}("sessionStorage")?window.sessionStorage:i.getInstance(),e}(0,o.Z)(i,"instance",void 0)},17592:function(e,t,n){n.d(t,{A2:function(){return c},Hi:function(){return a},yC:function(){return u}});var o=n(52983),i=n(91653),r=n(44125),l=n(95996);const a=(e,t)=>({video:t,activeCommentUri:null,comments:null,commentText:"",richCommentText:"",commentToDelete:null,addCommentState:r.c1.NotRequesting,deleteCommentState:null,isGuestModalShowing:!1,guestModalEmailErrorCode:null,isCommentsShowing:!1,isRequestedToShow:!1,guestName:null,guestCommentUris:[],isCommentsEnabled:(0,l.QK)(t),isAddCommentModalOpen:!1,context:e,isFetchingComments:!1,replyInProgress:null,stage:i.Y6,addReplyState:null,reviewUpsellDismissed:!1,isReply:!1,existingReplyCount:0,guestUserJwt:""}),s={setCommentText:()=>null,setRichCommentText:()=>null,setCommentToDelete:e=>null,setDeepLinkedCommentId:e=>null,setDeepLinkedReplyId:e=>null,fetchComments:()=>null,fetchMoreComments:()=>null,addComment:()=>null,addTimecodedComment:e=>null,onCommentSignUp:e=>null,onCloseGuestModal:()=>null,requestSetCommentsVisibility:e=>null,setIsAddCommentModalOpen:e=>null,onAnnotationDrag:e=>null,onAnnotationDragStart:e=>null,onAnnotationDragStop:()=>null,beginAnnotation:e=>null,cancelAnnotation:()=>null,initVideo:e=>null,updateVideoTime:(e,t)=>null,setTimecodedCommentInProgress:e=>null,selectComment:(e,t)=>null,addReply:()=>null,updateCommentStatus:()=>null,updateAnnotationPosition:(e,t)=>null,updateCuePoints:e=>null,requestDeleteComment:()=>null,completeDeleteComment:e=>null,errorDeleteComment:()=>null,dismissReviewUpsell:()=>null,enableComments:e=>e,setIsReply:()=>null,setExistingReplyCount:()=>null,setGuestModalEmailErrorCode:e=>e,setGuestUserJwt:()=>null},u=(0,o.createContext)(a()),c=(0,o.createContext)(s);u.displayName="ReviewState",c.displayName="ReviewDispatch"},56211:function(e,t,n){n.d(t,{A4:function(){return D},AA:function(){return R},B9:function(){return M},Lu:function(){return L},Oy:function(){return k},Ro:function(){return x},TC:function(){return G},cu:function(){return I},gz:function(){return $},hP:function(){return A},hi:function(){return Z},iO:function(){return F},k$:function(){return N},nU:function(){return U},zI:function(){return T}});var o=n(84493),i=n(52983),r=n(63207),l=n(55982),a=n(17254),s=n(87602),u=n(67189),c=n(92786),d=n(66742),m=n(37326),p=n(23742),v=n(18213),y=n(51272),g=n(12333),_=n(1046),f=n(4080),h=n(94024),O=n(69628),w=n(44125);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E=e=>{const t=e.user.uri.split("/");if(t&&t.length>0){const e=t[t.length-1];return parseInt(e,10)}return null},C=()=>(0,a.kD)({action_type:"click",feature:null}),j=()=>(0,s.lg)({is_integration:!1,integration_id:null,integration_name:null,managed_user_id:null,app_id:null,integration_type:null,partner_bucket:null,is_partner:null}),P=e=>(0,u.ms)(S(S({},{comment_length:null,existing_reply_counts:null,allow_comment_toggle:null,is_mention:null,mentionee_email:null,mentionee_permission:null,mentionee_id:null,is_pending:null}),e)),T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unlisted",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(o)return;const i=C(),r=(0,c.g9)({page_name:"single_video_view_manage",location:null}),a=(0,d.Yr)(null===n||void 0===n?void 0:n.teamUser),u=(0,m.Qt)({video_id:e,video_privacy:t}),y=(0,p.FI)({product:"collaboration",feature:"comments",location:"bottom_panel",modal_name:null,flow:null,element:"button",copy:"Comment",device_type:(0,l.Z)()}),g=S(S(S(S(S(S(S({},i),r),a),u),y),(0,s.lg)({is_integration:!1,integration_id:null,integration_name:null,is_partner:null})),P({comment_id:-1,comment_owner_id:-1,comment_length:0,is_reply:!1}));(0,v.Ou)("vimeo.open_comments",g,6,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:!0,value:null})},I=(e,t)=>{const n=t?"register_to_leave_comment":"log_in_to_leave_comment";r.BigPictureClient.sendEvent(new r.Event(n,1,{product:"Collaboration",path:window.location.pathname,location:"svv",clip_id:Number(e.id),owner_id:Number(E(e))}))},R=(e,t)=>{t||r.BigPictureClient.sendEvent(new r.Event("close_registration_modal",1,{product:"Collaboration",path:window.location.pathname,location:"svv",clip_id:Number(e.id),owner_id:Number(E(e))}))},D=(e,t,n,o,i,r,a,s,u)=>{const y=C(),g=(0,c.g9)({page_name:s,location:null}),_=(0,d.Yr)(null===u||void 0===u?void 0:u.teamUser),f=(0,m.Qt)({video_id:e||-1,video_privacy:t}),h=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",device_type:(0,l.Z)()}),w=j(),b=P({comment_id:Number(n),comment_length:i,comment_owner_id:o?(0,O._G)(o):0,is_reply:a}),E=S(S(S(S(S(S(S({},y),g),_),f),h),b),w);(0,v.Ou)("vimeo.open_comment_options",E,6,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:r,is_internal:!0,value:null})},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unlisted",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0;const u=C(),y=(0,c.g9)({page_name:a,location:null}),g=(0,d.Yr)(null===s||void 0===s?void 0:s.teamUser),_=(0,m.Qt)({video_id:e||-1,video_privacy:t}),f=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:"Copy link to comment",device_type:(0,l.Z)()}),h=j(),w=P({comment_id:Number(o),comment_length:r,comment_owner_id:i?(0,O._G)(i):0,is_reply:!1}),b=S(S(S(S(S(S(S({},u),y),g),_),f),w),h);(0,v.Ou)("vimeo.copy_comment_link",b,6,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:n,is_internal:!0,value:null})},x=(e,t,n)=>{try{var o;r.BigPictureClient.sendEvent(new r.Event("vimeo.click_on_svv_comment_delete",1,{product:"Collaboration",path:(null===(o=window.top)||void 0===o?void 0:o.location.pathname)??null,location:n?"svv_recipient":"svv_manage",video_id:e??null,comment_id:Number(t)}))}catch(i){console.warn("Unable to track vimeo.click_on_svv_comment_delete")}},U=(e,t,n)=>{try{var o;r.BigPictureClient.sendEvent(new r.Event("vimeo.render_deep_linked_comment_on_svv",1,{product:"Collaboration",path:(null===(o=window.top)||void 0===o?void 0:o.location.pathname)??null,location:n?"svv_recipient":"svv_manage",video_id:e??null,comment_id:Number(t)}))}catch{console.warn("Unable to track vimeo.render_deep_linked_comment_on_svv")}},A=e=>{let{isReply:t,isTimecoded:n,type:o}=e;try{r.BigPictureClient.sendEvent(new r.Event("vimeo.start_comment",1,{is_reply:t,is_timecoded:n,location:"svv",type:o}))}catch(l){var i;null===(i=window.newrelic)||void 0===i||i.noticeError(l,{extraInfo:"Unable to track vimeo.start_comment event"})}},M=e=>{A({isReply:!1,isTimecoded:!1,type:e})},N=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unlisted",o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,y=arguments.length>8?arguments[8]:void 0,g=arguments.length>9?arguments[9]:void 0;const _=(null===g||void 0===g||null===(t=g.user)||void 0===t?void 0:t.id)||0,f=C(),h=(0,c.g9)({page_name:y,location:null}),O=(0,d.Yr)(null===g||void 0===g?void 0:g.teamUser),w=P({comment_id:Number(a),is_reply:s,comment_length:r,comment_owner_id:i}),b=(0,m.Qt)({video_id:e,video_privacy:n}),E=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:null,device_type:(0,l.Z)()}),T=j(),I=S(S(S(S(S(S(S({},f),h),w),O),b),E),T);(0,v.Ou)("vimeo.delete_comment",I,6,{posted_by_uploader:_===o,posted_by_guest:!_,is_timecoded:u,is_internal:!0,value:null})},k=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unlisted",i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;const s=(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.id)||0,u=(0,a.kD)({action_type:"toggle",feature:null}),y=(0,c.g9)({page_name:"single_video_view_manage",location:null}),g=(0,d.Yr)(null===r||void 0===r?void 0:r.teamUser),_=P({comment_id:0,is_reply:!1,comment_length:0,comment_owner_id:0,allow_comment_toggle:e}),f=(0,m.Qt)({video_id:n,video_privacy:o}),h=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:null,device_type:(0,l.Z)()}),O=j(),w=S(S(S(S(S(S(S({},u),y),_),g),f),h),O);(0,v.Ou)("vimeo.allow_comments",w,6,{posted_by_uploader:s===i,posted_by_guest:!s,is_timecoded:!1,is_internal:!0,value:e})},$=(e,t)=>r.BigPictureClient.sendEvent(new r.Event("vimeo.open_video_share",2,{product:"Collaboration",path:window.location.pathname,location:"svv_comment",clip_id:e,is_upsell:t})),Z=function(e,t){var n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unlisted",r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;const u=(null===s||void 0===s||null===(n=s.user)||void 0===n?void 0:n.id)||0,y=(0,a.kD)({action_type:"toggle",feature:null}),g=(0,c.g9)({page_name:t,location:null}),_=(0,d.Yr)(null===s||void 0===s?void 0:s.teamUser),f=P({comment_id:0,is_reply:!1,comment_length:0,comment_owner_id:0,allow_comment_toggle:e}),h=(0,m.Qt)({video_id:o,video_privacy:i}),O=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:null,device_type:(0,l.Z)()}),w=j(),b=S(S(S(S(S(S(S({},y),g),f),_),h),O),w);(0,v.Ou)("vimeo.close_comment_panel",b,6,{posted_by_uploader:u===r,posted_by_guest:!u,is_timecoded:!1,is_internal:!0,value:null})},G=e=>{var t;const{videoId:n,videoOwnerId:o,videoPrivacy:i,uploaderId:r,context:l,viewer:y,commentId:g,commentOwnerId:_,commentLength:f,isMention:h,isReply:O,isTimeCoded:b,existingReplyCount:E}=e,C=null===y||void 0===y?void 0:y.teamUser,j=(null===y||void 0===y||null===(t=y.user)||void 0===t?void 0:t.id)||0,P=l===w.Ux.Recipient&&!(null!==y&&void 0!==y&&y.isSimplifiedSite),T={posted_by_uploader:j===r,posted_by_guest:!j,is_timecoded:b,is_internal:!0,value:null},I=S(S(S(S(S(S(S({},(0,a.kD)({action_type:"click",feature:null})),(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel"})),(0,d.Yr)(C)),(0,m.Qt)({video_id:n,video_owner_id:Number(o),video_privacy:i})),(0,c.g9)({page_name:l===w.Ux.Manage?"single_video_view_manage":P?"viewer_home":"single_video_view_recipient",location:null,referrer_page_name:null})),(0,s.lg)({is_integration:!1,integration_id:null,integration_name:null,is_partner:null})),(0,u.ms)({comment_id:Number(g),is_reply:O,comment_owner_id:_,comment_length:f,existing_reply_counts:E,allow_comment_toggle:!0,is_mention:h,mentionee_email:null,mentionee_permission:null,mentionee_id:null,is_pending:null}));(0,v.Ou)("vimeo.post_comment",I,6,T)},F=()=>{var e;const t=(0,i.useContext)(g.Z),{annotationForm:n}=(0,i.useContext)(_.ui),{editor:o}=(0,i.useContext)(h.VZ),r=null===t||void 0===t?void 0:t.teamUser,l=(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id)||0,b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6?arguments[6]:void 0;const{video:_,context:f,commentText:h,isReply:b,existingReplyCount:E}=g,C=_&&_.privacy&&void 0!==_.privacy.view?_.privacy.view:null,j=_?(0,O._G)((null===_||void 0===_?void 0:_.user.uri)||""):0,P=y||o,T=f===w.Ux.Recipient&&!(null!==t&&void 0!==t&&t.isSimplifiedSite),I={comment_id:v,is_reply:b,existing_reply_counts:E,comment_owner_id:l,comment_length:P?P.getText().length:h.length,allow_comment_toggle:!0,is_mention:!!P&&(0,O.Qo)(P),mentionee_email:e,mentionee_permission:u,additionalFields:{posted_by_uploader:l===j,posted_by_guest:!l,is_timecoded:0!==n.timecode,is_internal:!0,value:null},feature:"comments",location:"comments_panel",videoId:(null===_||void 0===_?void 0:_.id)||0,video_privacy:C,mentionee_id:i,is_pending:a,pageName:f===w.Ux.Manage?"single_video_view_manage":T?"viewer_home":"single_video_view_recipient"},R=S(S(S(S(S({},(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel"})),(0,d.Yr)(r)),(0,m.Qt)({video_id:I.videoId,video_privacy:I.video_privacy})),(0,c.g9)({page_name:I.pageName,location:null,referrer_page_name:null})),(0,s.lg)({is_integration:!1,integration_id:null,integration_name:null,is_partner:null}));return{envelope:I,bpContext:R}};return{trackMentionImpression:e=>{const{envelope:t,bpContext:n}=b(null,-1,!1,null,Number(0),null,e);(0,v.Ou)("vimeo.mention_box_impression",S(S(S({},(0,y.Mw)({view_type:"impression",feature:null})),n),(0,u.ms)({comment_id:t.comment_id,is_reply:t.is_reply,comment_owner_id:t.comment_owner_id,comment_length:t.comment_length,existing_reply_counts:t.existing_reply_counts,allow_comment_toggle:t.allow_comment_toggle,is_mention:!0,mentionee_email:t.mentionee_email,mentionee_permission:t.mentionee_permission,mentionee_id:t.mentionee_id,is_pending:t.is_pending})),-1)},trackAddMentioneeToComment:(e,t,n)=>{var o;const{entity:i}=e,r=i.teamUser,l=i.user||(null===r||void 0===r?void 0:r.user),s=r?r.email:(null===l||void 0===l?void 0:l.email)||"",c=null!==l&&void 0!==l&&l.uri?(0,O._G)(l.uri):0,d=(null===(o=i.teamUser)||void 0===o?void 0:o.status)===f.u2.Pending,{envelope:m,bpContext:p}=b(s,c,d,t,0,null,n);(0,v.Ou)("vimeo.add_mentionee_to_comment",S(S(S({},(0,a.kD)({action_type:"click",feature:null})),p),(0,u.ms)({comment_id:m.comment_id,is_reply:m.is_reply,comment_owner_id:m.comment_owner_id,comment_length:m.comment_length,existing_reply_counts:m.existing_reply_counts,allow_comment_toggle:m.allow_comment_toggle,is_mention:m.is_mention,mentionee_email:m.mentionee_email,mentionee_permission:m.mentionee_permission,mentionee_id:m.mentionee_id,is_pending:m.is_pending})),6,S({},m.additionalFields))}}}},44125:function(e,t,n){let o,i,r;n.d(t,{L9:function(){return r},Rg:function(){return s},Ux:function(){return o},Zk:function(){return u},c1:function(){return a},t:function(){return i},vd:function(){return l}}),function(e){e.Recipient="recipient",e.Manage="manage"}(o||(o={})),function(e){e.Open="open",e.Closed="closed"}(i||(i={})),function(e){e.SetVideo="SET_VIDEO",e.FetchCommentsInit="FETCH_INIT",e.FetchCommentsComplete="FETCH_COMPLETE",e.SetCommentText="SET_COMMENT_TEXT",e.SetRichCommentText="SET_RICH_COMMENT_TEXT",e.SetAddCommentState="SET_ADD_COMMENT_STATE",e.SetDeleteCommentState="SET_DELETE_COMMENT_STATE",e.ResetDeleteCommentState="RESET_DELETE_COMMENT_STATE",e.SetGuestModalVisibility="SET_GUEST_MODAL_VISIBILITY",e.SetGuestModalEmailExistError="SET_GUEST_MODAL_EMAIL_EXIST_ERROR",e.SetCommentToDelete="SET_COMMENT_TO_DELETE",e.SetGuestName="SET_GUEST_NAME",e.RequestSetCommentsVisibility="REQUEST_SET_COMMENTS_VISIBILITY",e.CommentAdded="CommentAdded",e.SetReviewUpsellShowing="SET_REVIEW_UPSELL_SHOWING",e.SetIsAddCommentModalOpen="SET_IS_ADD_COMMENT_MODAL_OPEN",e.ResetGuestComments="RESET_GUEST_COMMENTS",e.SelectComment="SELECT_COMMENT",e.SetReplyInProgress="SET_REPLY_IN_PROGRESS",e.SetAddReplyState="SET_ADD_REPLY_STATE",e.ReplyAdded="REPLY_ADDED",e.CommentUpdated="COMMENT_UPDATED",e.UpdateComment="UPDATE_COMMENT",e.SetDeepLinkedCommentId="SET_DEEP_LINKED_COMMENT_ID",e.SetDeepLinkedReplyId="SET_DEEP_LINKED_REPLY_ID",e.DismissReviewUpsell="DISMISS_REVIEW_UPSELL",e.SetCommentsEnabled="SET_COMMENTS_ENABLED",e.SetIsReply="SET_IS_REPLY",e.SetExistingReplyCount="SET_EXISTING_REPLY_COUNT",e.SetGuestUserJwt="SET_GUEST_USER_JWT"}(r||(r={}));const l={SetMentionProps:"SET_MENTION_PROPS",SetRichTextEditor:"SET_RICH_TEXT_EDITOR",SetIsMentionsActive:"SET_IS_MENTIONS_ACTIVE",SetMentionListRef:"SET_MENTION_LIST_REF",SetLoadingMentions:"SET_LOADING_MENTIONS",SetMentionsList:"SET_MENTIONS_LIST",SetMentionedUsers:"SET_MENTIONED_USERS",RegisterKeyDownHandler:"REGISTER_KEY_DOWN_HANDLER",UnregisterKeyDownHandler:"UNREGISTER_KEY_DOWN_HANDLER",SetMentionedOwner:"SET_MENTIONED_OWNER",SetCurrentTeamUser:"SET_CURRENT_TEAM_USER",SetSearchMentionQuery:"SET_SEARCH_MENTION"};let a,s;!function(e){e[e.Requesting=0]="Requesting",e[e.NotRequesting=1]="NotRequesting",e[e.Error=2]="Error",e[e.Success=3]="Success"}(a||(a={})),function(e){e[e.Requesting=0]="Requesting",e[e.Complete=1]="Complete",e[e.NotRequesting=2]="NotRequesting",e[e.Error=3]="Error"}(s||(s={}));const u={EMAIL_ALREADY_EXIST:2437,INVALID_EMAIL_ADDRESS:2204,TOO_MANY_REQUESTS:10022}},95996:function(e,t,n){n.d(t,{QK:function(){return f},SI:function(){return y},T2:function(){return a},WR:function(){return g},YI:function(){return _},_T:function(){return v},kY:function(){return d},qi:function(){return O},r$:function(){return u},wd:function(){return h},x2:function(){return c},xZ:function(){return s},yT:function(){return p}});var o=n(84493),i=n(69628);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a=e=>e.reduce(((e,t)=>l(l({},e),{},{[t.uri]:t})),{}),s=e=>e.map((e=>e.uri)),u=e=>{const t=e.split("/");return t[t.length-1]},c=e=>e.split("/")[2],d=e=>{const t=e.split("user");return parseInt(t[1])},m=["coordinates","created_time","metadata","modified_time","resource_key","status","text","richtext","text_decorations","time_code","uri","guest_user_uri","user_name","user.uri","user.pictures","replies.uri","replies.created_time","replies.text","replies.richtext","replies.text_decorations","replies.user","replies.user_name","replies.metadata","replies.guest_user_uri"];function p(e,t,n,o){return t&&e?`//${e.apiUrl}${t}?fields=${encodeURIComponent(m.join(","))}&sort=date&direction=desc${n?`&version_uri=${encodeURIComponent(n)}`:""}${o?`&note_id=${o}`:""}${(0,i.ko)(t,!0)}`:null}const v=e=>{var t,n;const o=null===e||void 0===e||null===(t=e.metadata)||void 0===t||null===(n=t.connections)||void 0===n?void 0:n.versions;return(null===o||void 0===o?void 0:o.currentUri)||(y(o)?null:null===o||void 0===o?void 0:o.latestIncompleteVersion)},y=e=>{var t;return!(null===e||void 0===e||null===(t=e.latestIncompleteVersion)||void 0===t||!t.match(/_replace$/))},g=(e,t,n)=>{var o,i;if(!e||!e.user)return n.some((e=>e===t.uri));const r=null===(o=t.user)||void 0===o?void 0:o.uri.match(/\/([^\/]*)$/),l=r?parseInt(r[1],10):null;return l&&l&&(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.id)===l},_=(e,t)=>{var n;return t.user&&(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.id)===parseInt(t.user&&t.user.uri.split("/")[2],10)},f=e=>{var t,n,o,i,r;return Boolean((null===e||void 0===e||null===(t=e.metadata)||void 0===t||null===(n=t.connections)||void 0===n||null===(o=n.privateComments)||void 0===o?void 0:o.isEnabled)&&("available"===e.status||!y(null===(i=e.metadata)||void 0===i||null===(r=i.connections)||void 0===r?void 0:r.versions)))},h=e=>{var t;return null===(t=e.textDecorations)||void 0===t?void 0:t.some((e=>{var t;return!(null===(t=e.assets)||void 0===t||!t.video)}))},O=e=>{var t,n;const o=null===(t=e.textDecorations)||void 0===t?void 0:t.filter((e=>{var t;return!(null===e||void 0===e||null===(t=e.assets)||void 0===t||!t.video)}));return o&&o.length?null===(n=o[o.length-1].assets)||void 0===n?void 0:n.video:null}},43544:function(e,t,n){n.d(t,{e:function(){return c}});var o=n(84493),i=n(72572),r=n(62555),l=n(66699),a=n(25208);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=e=>{var t,n;const o=(0,i.pm)(),s=null!==e&&void 0!==e&&e.id&&e.hash?`${null===e||void 0===e?void 0:e.id}:${e.hash}`:null===e||void 0===e?void 0:e.id,{data:c,mutate:d}=(0,l.m)((()=>s?{where:{videoId:s},select:["metadata.connections.privateComments.isEnabled","metadata.connections.privateComments.uri"],headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.1"}}:null),{revalidateOnFocus:!1,revalidateOnReconnect:!1}),[m,p]=(0,a.r)(),v=e=>{var t,n,o;return c&&d(u(u({},c),{},{metadata:u(u({},c.metadata),{},{connections:u(u({},null===(t=c.metadata)||void 0===t?void 0:t.connections),{},{privateComments:u(u({},null===(n=c.metadata)||void 0===n||null===(o=n.connections)||void 0===o?void 0:o.privateComments),{},{isEnabled:e})})})}),!1)};return{loading:!c,patchPrivateCommentsSetting:e=>{s&&(m({where:{videoId:s},select:["metadata.connections.privateComments.isEnabled"],variables:{privateComments:{isEnabled:e}},headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.1"}}).then((()=>{d(),null!==p&&void 0!==p&&p.error?(o({title:(0,r.Iu)({singular:"Changes could not be saved",dictionary:{es:{singular:"No se pudieron guardar los cambios"},"de-DE":{singular:"\xc4nderungen konnten nicht gespeichert werden"},"fr-FR":{singular:"Les modifications n'ont pas pu \xeatre enregistr\xe9es"},"ja-JP":{singular:"\u5909\u66f4\u3092\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"},"ko-KR":{singular:"\ubcc0\uacbd \uc0ac\ud56d\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"},"pt-BR":{singular:"As altera\xe7\xf5es n\xe3o puderam ser salvas"},"zh-CN":{singular:"\u65e0\u6cd5\u4fdd\u5b58\u66f4\u6539"}}})}),v(!e)):o({title:(0,r.Iu)({singular:"Changes saved",dictionary:{es:{singular:"Guardamos los cambios"},"de-DE":{singular:"\xc4nderungen wurden gespeichert"},"fr-FR":{singular:"Changements sauvegard\xe9s"},"ja-JP":{singular:"\u5909\u66f4\u5185\u5bb9\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f"},"ko-KR":{singular:"\ubcc0\uacbd \uc0ac\ud56d \uc800\uc7a5 \uc644\ub8cc"},"pt-BR":{singular:"Altera\xe7\xf5es salvas"},"zh-CN":{singular:"\u5df2\u4fdd\u5b58\u66f4\u6539"}}})})})),v(e))},privateComments:null===c||void 0===c||null===(t=c.metadata)||void 0===t||null===(n=t.connections)||void 0===n?void 0:n.privateComments}}},69628:function(e,t,n){n.d(t,{H7:function(){return d},Pd:function(){return r},Qo:function(){return y},_G:function(){return a},a:function(){return u},b:function(){return c},hs:function(){return p},jm:function(){return l},ko:function(){return g},oj:function(){return _},p9:function(){return m},uC:function(){return s},zS:function(){return v}});var o=n(39899),i=n(4080);const r=e=>e?parseInt(e.split("/")[2],10):null,l=e=>{try{JSON.parse(e)}catch(t){return!1}return!0},a=e=>{const t=e.split("/");return parseInt(t[2])},s=e=>{const t=e.split("/");return parseInt(t[4])},u=e=>{const t=e.split("/");return t[t.length-1]},c=e=>{const t=e.match(/\/(?:comments|private_comments)\/(\d+)\//);return t?t[1]:null},d=(e,t)=>t?`${e}:${t}`:e,m=e=>{var t,n,o;const i=null===(t=e.entity)||void 0===t?void 0:t.teamUser,r=null===(n=e.entity)||void 0===n?void 0:n.guestUser,l=(null===(o=e.entity)||void 0===o?void 0:o.user)||(null===i||void 0===i?void 0:i.user),u=null!==l&&void 0!==l&&l.uri?a(null===l||void 0===l?void 0:l.uri):void 0,c=i?s(null===i||void 0===i?void 0:i.uri):void 0,d=r?(null===r||void 0===r?void 0:r.uri).split("/")[2]:void 0;let m;m=d?null===r||void 0===r?void 0:r.name:l?(l.name??"").trim():null===i||void 0===i?void 0:i.email;const p={label:m,userId:u,teamUserId:u?void 0:c,guestUserId:d};return Object.keys(p).forEach((e=>void 0===p[e]&&delete p[e])),p},p=e=>{var t,n,o,r;return(![i.V5.Admin,i.V5.Owner].includes((null===(t=e.entity)||void 0===t||null===(n=t.teamUser)||void 0===n?void 0:n.permissionLevel)||"")&&!(null!==(o=e.currentPermissions)&&void 0!==o&&o.permissionPolicyUri)&&(null===(r=e.applicablePermissionPolicies)||void 0===r?void 0:r.length))??!1},v=e=>{let t=!1;return e.state.doc.descendants((e=>{"mention"!=e.type.name||e.attrs.userId||e.attrs.teamUserId||!e.attrs.email||(t=!0)})),t},y=e=>{let t=!1;return e.state.doc.descendants((e=>{"mention"==e.type.name&&(t=!0)})),t},g=(e,t)=>{const n=r(e)||"",i=(0,o.l)(n)||"",l=(a="password",(s=i)&&s.length?`${a}=${s}`:"");var a,s;const u=t||-1!==e.indexOf("?")?"&":"?";return l?`${u}${l}`:""},_=e=>{let t=0,n=!1;return e.content.forEach((e=>{var o;null===e||void 0===e||null===(o=e.content)||void 0===o||o.forEach((e=>{e.text&&(t+=e.text.length),"mention"===e.type&&(n=!0)}))})),{commentLength:t,isMention:n}}},91450:function(e,t,n){n.d(t,{Z:function(){return b}});var o=n(84493),i=n(29143),r=n(42145),l=n(42591),a=n(35163),s=n(52983),u=n(73898),c=n(90251),d=n(70296),m=n(75073),p=n(97458);const v=e=>{let{label:t,avatarUri:n}=e;return(0,p.jsxs)(g,{children:[(0,p.jsx)(c.q,{alt:"avatar",size:"xs",src:n}),(0,p.jsx)(_,{children:t})]})},y=(0,u.default)(r.T5).withConfig({componentId:"lmrwy4-0"})(["display:inline;"]),g=u.default.div.withConfig({componentId:"lmrwy4-1"})(["display:flex;align-items:center;gap:",";padding:0 ",";"],(0,a.hO)(10),(0,a.hO)(6)),_=u.default.span.withConfig({componentId:"lmrwy4-2"})(["font-size:",";font-height:",";overflow:hidden;white-space:nowrap;text-overflow:ellipsis;"],(0,a.hO)(14),(0,a.hO)(16)),f=u.default.span.withConfig({componentId:"lmrwy4-3"})(["cursor:pointer;color:",";font-weight:bold;&:hover{color:",";}"],m.cL,m.CJ);var h=e=>{let{node:{attrs:t},extension:{options:{onMentionRemove:n,onMentionAdd:o}}}=e;return(0,s.useEffect)((()=>(null===o||void 0===o||o(t),()=>{n&&(t.teamUserId||t.userId)&&n(t.userId?parseInt(t.userId??""):parseInt(t.teamUserId??""))})),[n,t.userId,t.teamUserId]),(0,p.jsx)(y,{children:(0,p.jsx)(d.u,{label:(0,p.jsx)(v,{label:t.label,avatarUri:t.avatar??m.ur}),placement:"top",children:(0,p.jsx)(f,{children:t.label})})})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=i.ZP.extend({addProseMirrorPlugins(){return[(0,l.q$)(w({editor:this.editor},this.options.suggestion))]},addAttributes(){var e;return w(w({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{userId:{default:void 0},teamUserId:{default:void 0},guestUserId:{default:void 0},email:{default:void 0},avatar:{default:void 0}})},addNodeView:()=>(0,r.fW)(h)})},75073:function(e,t,n){n.d(t,{CJ:function(){return l},cL:function(){return r},rp:function(){return i},ur:function(){return o}});const o="https://i.vimeocdn.com/portrait/defaults-blue_75x75.png",i="https://i.vimeocdn.com/portrait/defaults-gray_75x75.png",r="#00adef",l="#0080bf"},92337:function(e,t,n){n.d(t,{P_:function(){return R},sS:function(){return T},n3:function(){return I}});var o=n(84493),i=n(52983),r=n(94580),l=n(69952),a=n(73252),s=n(96819),u=n(62555),c=n(55982),d=n(8262);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v;!function(e){e.SUCCESS="success",e.FAILED="failed"}(v||(v={}));function y(){const{0:e,1:t}=(0,i.useState)({}),n=(0,i.useCallback)(((o,i,r,l,a,s)=>new Promise(((u,c)=>{let m=null;(async(e,t,n,o,i)=>{const r=await fetch(`//${t}/videos/${e}/tag_job/${o}?filename=${i}`,{method:"GET",headers:{Authorization:`jwt ${n}`}});if(r.ok){const e=await r.json();return(0,d.uo)(e)}throw new Error(await r.json())})(o,i,r,l,a).then((d=>{d.status===v.SUCCESS&&d.downloadUrl?(t(p(p({},e),{},{[s]:d.downloadUrl})),m&&clearTimeout(m),u(d.downloadUrl)):d.status===v.FAILED?c():m=setTimeout((()=>n(o,i,r,l,a,s).then((e=>u(e))).catch((()=>c()))),500)})).catch((()=>c()))}))),[e]);return{shouldTagVideo:(e,t)=>"svv"===t&&(e.size&&e.size<=100<<20),tagVideo:(0,i.useCallback)(((o,i,r,l,a)=>new Promise(((s,u)=>{const c=e[l];c?s(c):(async(e,t,n,o,i)=>{const r=await fetch(`//${t}/videos/${e}/tag_job`,{method:"POST",headers:{Authorization:`jwt ${n}`,"Content-Type":"application/json"},body:JSON.stringify({flow:i,video_file_id:o})});if(r.ok){const e=await r.json();return(0,d.uo)(e)}throw new Error(await r.json())})(r,o,i,l,a).then((a=>{a.status===v.FAILED&&u(),a.downloadUrl?(t(p(p({},e),{},{[l]:a.downloadUrl})),s(a.downloadUrl)):n(r,o,i,a.id,a.filename,l).then((e=>s(e))).catch((()=>u()))})).catch((()=>u()))}))),[n,e])}}const g=e=>{const t=document.createElement("a");t.href=e,t.click()};var _,f=n(17254),h=n(37326),O=n(23742),w=n(87602),b=n(92786),S=n(18213),E=n(12333),C=n(97458);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.B=1e-6]="B",e[e.KB=.001]="KB",e[e.MB=1]="MB",e[e.GB=1e3]="GB",e[e.TB=1e6]="TB"}(_||(_={}));const T=e=>{var t;const n=null===(t=e.match(/[a-zA-Z]/))||void 0===t?void 0:t.pop();var[o,i]=e.split(n),i=n+i;const r=parseFloat(o)*parseFloat(_[i]);return Math.round(10*r)/10},I=e=>{const{width:t,height:n}=e;let o=t,i=n;for(;i;){const e=i;i=o%i,o=e}return`${t/o}:${n/o}`},R=e=>{let{files:t,handleClick:n,videoID:o,location:d,className:m,pageName:p}=e;const{0:v,1:_}=(0,i.useState)([]),{shouldTagVideo:j,tagVideo:T}=y(),I=(0,i.useContext)(E.Z);return(0,C.jsx)(r.k,{gap:"1.75rem",direction:"column",className:m,children:t.map((e=>(0,C.jsxs)(r.k,{align:"center",justify:"space-between",id:`download-file-${e.link}`,children:[(0,C.jsxs)(r.k,{gap:"0.75rem",align:"center",children:[(0,C.jsx)(l.n,{size:"1",fontWeight:"500",minW:"3.13rem",children:"source"===e.quality?(0,u.Iu)({singular:"Original",dictionary:{"ja-JP":{singular:"\u30aa\u30ea\u30b8\u30ca\u30eb\u30b5\u30a4\u30ba"},"ko-KR":{singular:"\uc624\ub9ac\uc9c0\ub110"},"zh-CN":{singular:"\u539f\u521b"}}}):e.publicName}),(0,C.jsxs)(r.k,{gap:"xs",children:[(0,C.jsx)(l.n,{size:"3",color:"text-secondary",children:e.sizeShort}),(0,C.jsx)(l.n,{size:"3",color:"text-secondary",children:"|"}),(0,C.jsxs)(l.n,{size:"3",color:"text-secondary",children:[e.width," x ",e.height]})]})]}),(0,C.jsx)(a.h,{"aria-label":(0,u.Iu)({singular:"Download",dictionary:{es:{singular:"Descargar"},"de-DE":{singular:"Herunterladen"},"fr-FR":{singular:"T\xe9l\xe9charger "},"ja-JP":{singular:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"},"ko-KR":{singular:"\ub2e4\uc6b4\ub85c\ub4dc"},"pt-BR":{singular:"Baixar"},"zh-CN":{singular:"\u4e0b\u8f7d"}}}),as:"a",href:`${e.link}`,variant:"secondary",icon:(0,C.jsx)(s.n,{}),isLoading:-1!==v.indexOf(e.link),onClick:()=>{var t;(((e,t,n)=>{const o=(0,f.kD)({action_type:"click",feature:null}),i=(0,h.Qt)({video_id:parseFloat(e)}),r=(0,O.FI)({product:"viewer_home",feature:"download",location:"modal",modal_name:"download_modal",flow:"download_video_file",element:"button",copy:null,device_type:(0,c.Z)()}),l=(0,w.lg)({is_integration:!1,integration_id:null,integration_name:null,managed_user_id:null,app_id:null,integration_type:null,partner_bucket:null,is_partner:null}),a=n&&(0,b.g9)({page_name:n}),s=P(P(P(P(P({},o),i),r),l),a),u={distribution_type:"download",target_quality:null,target_resolution:t,target_file_details:null,number_of_items:1,embed_config:null,embed_custom_dimensions:null};(0,S.Ou)("vimeo.distribute_content",s,2,u)})(o?o.toString():"",e.quality,p),n&&n(e),null!==I&&void 0!==I&&I.apiUrl&&null!==I&&void 0!==I&&I.jwt&&d&&o&&j(e,d))&&(_([...v,e.link]),T(I.apiUrl,I.jwt,o,(null===(t=e.videoFileId)||void 0===t?void 0:t.toString())??"").then((t=>{g(t||`${e.link}`),_([...v.filter((t=>t!==e.link))])})).catch((()=>{g(`${e.link}`),_([...v.filter((t=>t!==e.link))])})))}})]},e.link)))})}},13510:function(e,t,n){n.d(t,{_A:function(){return h}});var o=n(10392),i=n(84493),r=n(4515);const l=["baseUrl","select","where","query"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}async function u(e){var t;let{baseUrl:n,select:i,where:{videoId:a},query:u}=e,c=(0,o.Z)(e,l),d=await fetch(`${n}/videos/${a}/suggested_mentionees?${(0,r.Ov)(u)}&fields=${i.map(r.Rb).join(",")}`,s(s({},c),{},{method:"GET"}));if(!d.ok)throw new r.F7("A network error occurred",d.status,d);if(204===d.status)return null;if(null===(t=d.headers.get("content-type"))||void 0===t||!t.match(/^application\/(.+)?json$/))throw new Error("Expected JSON response");let m=await d.json();return(0,r.l_)(m)}var c=n(96638),d=n(90203),m=n(52983),p=n(12959),v=n(36966),y=n(73656);const g=["perPage","page"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(){const{mutate:e}=(0,c.kY)();let{baseUrl:t,jwt:n,xVimeoPage:o,locale:i}=(0,v.r)(),[r,l]=(0,d.AC)();return[(0,m.useCallback)((async r=>{l({type:"REQUEST"});try{let a=await e(`/videos/${r.where.videoId}/suggested_mentionees${(0,d.Y$)(r)}`,u(f(f({},r),{},{baseUrl:t,headers:f(f({},r.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${o}`,"Accept-Language":i??"en"})})));l({type:"SUCCESS",payload:a})}catch(a){l({type:"FAILURE",payload:a})}}),[t,o,n,i,l]),r]}"true"===y.env.STORYBOOK&&(0,d.MR)((function(e,t){const n="function"===typeof e?e():e;let{baseUrl:o,jwt:i,xVimeoPage:r,locale:l}=(0,v.r)();return(0,c.ZP)(n?`/videos/${n.where.videoId}/suggested_mentionees${(0,d.Y$)(n)}`:()=>null,n?()=>u(f(f({},n),{},{headers:f(f({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${r}`,"Accept-Language":l??"en"}),baseUrl:o})):null,t)}),{endpoint:"/videos/:videoId/suggested_mentionees",method:"GET"}),"true"===y.env.STORYBOOK&&(0,d.MR)(h,{endpoint:"/videos/:videoId/suggested_mentionees",method:"GET"}),"true"===y.env.STORYBOOK&&(0,d.MR)((function(e,t){const n="function"===typeof e?e():e;let{baseUrl:i,jwt:r,xVimeoPage:l,locale:a}=(0,v.r)();return(0,p.ZP)(((e,t)=>{if(null===n)return null;if(t&&!t.paging.next)return null;let i=n.query??{},{perPage:r=25,page:l}=i,a=(0,o.Z)(i,g),s=n.select.join(","),u=Object.entries(a??{}).filter((e=>{let[,t]=e;return"undefined"!==typeof t})).map((e=>{let[t,n]=e;return`${t}=${n}`})).join("&");return[`/videos/${n.where.videoId}/suggested_mentionees?page=${e+1}&perPage=${r}&fields=${s}&${u}`,e]}),null!==n?e=>{let[t,o]=e;return u(f(f({},n),{},{baseUrl:i,headers:f(f({},n.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${l}`,"Accept-Language":a??"en"}),query:f(f({},n.query),{},{page:o+1})}))}:null,t)}),{endpoint:"/videos/:videoId/suggested_mentionees",method:"GET"})},92773:function(e,t,n){n.d(t,{S:function(){return _}});var o=n(84493),i=n(90203),r=n(10392),l=n(4515);const a=["baseUrl","variables","where"],s=["baseUrl","variables","where"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=n(52983),m=n(96638),p=n(36966),v=n(73656);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(){const{mutate:e}=(0,m.kY)();let{baseUrl:t,jwt:n,xVimeoPage:o,locale:s}=(0,p.r)(),[u,v]=(0,i.AC)();return[(0,d.useCallback)((async u=>{v({type:"REQUEST"});try{let d=await e(`/videos/${u.where.videoId}/team_permission${(0,i.Y$)(u)}`,async function(e){var t;let{baseUrl:n,variables:o,where:{videoId:i}}=e,s=(0,r.Z)(e,a),u=await fetch(`${n}/videos/${i}/team_permission`,c(c({},s),{},{method:"PUT",body:JSON.stringify((0,l.mH)(o))}));if(!u.ok)throw new l.F7("A network error occurred",u.status,u);if(204===u.status)return null;if(null===(t=u.headers.get("content-type"))||void 0===t||!t.match(/^application\/(.+)?json$/))throw new Error("Expected JSON response");let d=await u.json();return(0,l.l_)(d)}(g(g({},u),{},{baseUrl:t,headers:g(g({},u.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${o}`,"Accept-Language":s??"en"})})),!1);v({type:"SUCCESS",payload:d})}catch(d){v({type:"FAILURE",payload:d})}}),[t,o,n,s,v]),u]}"true"===v.env.STORYBOOK&&(0,i.MR)(_,{endpoint:"/videos/:videoId/team_permission",method:"PUT"}),"true"===v.env.STORYBOOK&&(0,i.MR)((function(){const{mutate:e}=(0,m.kY)();let{baseUrl:t,jwt:n,xVimeoPage:o,locale:a}=(0,p.r)(),[u,v]=(0,i.AC)();return[(0,d.useCallback)((async u=>{v({type:"REQUEST"});try{let d=await e(`/videos/${u.where.videoId}/team_permission${(0,i.Y$)(u)}`,async function(e){var t;let{baseUrl:n,variables:o,where:{videoId:i}}=e,a=(0,r.Z)(e,s),u=await fetch(`${n}/videos/${i}/team_permission`,c(c({},a),{},{method:"DELETE",body:JSON.stringify((0,l.mH)(o))}));if(!u.ok)throw new l.F7("A network error occurred",u.status,u);if(204===u.status)return null;if(null===(t=u.headers.get("content-type"))||void 0===t||!t.match(/^application\/(.+)?json$/))throw new Error("Expected JSON response");let d=await u.json();return(0,l.l_)(d)}(g(g({},u),{},{baseUrl:t,headers:g(g({},u.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${o}`,"Accept-Language":a??"en"})})),!1);v({type:"SUCCESS",payload:d})}catch(d){v({type:"FAILURE",payload:d})}}),[t,o,n,a,v]),u]}),{endpoint:"/videos/:videoId/team_permission",method:"DELETE"})},77192:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(52983),i=n(21484),r=n(8467);function l(e,t,n,l){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"540p",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;const{PlayerConstructor:c,playerType:d}=(0,o.useContext)(i.E),{0:m,1:p}=(0,o.useState)(!1),{0:v,1:y}=(0,o.useState)(null),g=(0,o.useRef)(null),{1:_}=(0,o.useReducer)((e=>e+1),0),f=(0,o.useCallback)((()=>{if(p(!0),d===r.G.BarebonePlayer)new c(e.current,l).then((e=>{e.loop=a,e.quality=s,e.volume=u,y(e),g.current=e,p(!1)})).catch((()=>p(!1)));else{const t=new c(e.current,l,!0,{});y(t),g.current=t}p(!1)}),[c,e,l,d,a,s,u]),h=()=>{var e,t;g.current&&(null===(e=(t=g.current).unload)||void 0===e||e.call(t),y(null),g.current=null)},O=()=>{var e,t;g.current&&(null===(e=(t=g.current).destroy)||void 0===e||e.call(t),y(null),g.current=null)},w=()=>{h(),_()};return(0,o.useEffect)((function(){var o;g.current&&(null===(o=g.current)||void 0===o?void 0:o.videoId)===Number(t)||c&&n&&e.current&&t&&l&&!m&&(e.current.innerHTML="",f())}),[c,null===v||void 0===v?void 0:v.videoId,m,e,t,l,n,a,s,f]),(0,o.useEffect)((function(){return()=>{O()}}),[]),{player:v,flushPlayer:h,forceReload:w}}}}]);