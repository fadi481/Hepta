"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38368],{38368:function(e,t,n){n.d(t,{l:function(){return Me}});var i=n(84493),o=n(52983),r=n(73898),s=n(62555),a=n(91653),l=n(17592),d=n(12333),u=n(93805),c=n(21840),p=n(24777),m=n(80135);const f="0 1px 3px 1px rgba(0, 0, 0, 0.32)",g=`${f}, 0 0 0 10px rgba(255, 255, 255, 0.25)`,h=r.default.span.withConfig({componentId:"sc-14gn5wu-0"})(["align-items:center;background:white;border-radius:50%;box-shadow:",";display:flex;height:",";justify-content:center;position:relative;width:",";transition:box-shadow 0.2s ease-out;&:after{background:",";border-radius:50%;display:block;content:'';height:100%;left:0;position:absolute;width:100%;top:0;transition:transform 0.2s ease-out;transform:scale(0);}"],f,(0,p.rem)(18),(0,p.rem)(18),(e=>e.color)),v=r.default.button.withConfig({componentId:"sc-14gn5wu-1"})(["background:none;color:",";height:",";left:-",";padding:",";position:absolute;outline:none;border:none;top:-",";width:",";"," "," "," &.is--highlighted{transform:scale(1.25);}"],(0,m.iN)(500),(0,p.rem)(38),(0,p.rem)(19),(0,p.rem)(10),(0,p.rem)(19),(0,p.rem)(38),(e=>{let{isActive:t,isDisabled:n}=e;return n?t?"cursor: default;":"cursor: pointer;":"\n        &:active { \n            cursor: grabbing; \n        }\n        cursor: grab;\n    "}),(e=>{let{isActive:t}=e;return t?`\n        ${h} {\n            box-shadow: 0 0 0 2px white, 0 2px 10px 3px rgba(0, 0, 0, 0.18);\n\n            &:after {\n                transform: scale(1);\n            }\n        }\n    `:`\n        &.is--highlighted,\n        &:hover {\n            ${h} {\n                box-shadow: ${g};\n            }\n        }\n    `}),(e=>{let{isDragging:t}=e;return t&&"\n        &:after {\n            content: ''\n            transform: scale(1.1);\n        }\n    "}));var y=n(99081),b=n(97458);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const j=e=>{let{onDrag:t,onStart:n,onStop:i,boardRef:r,children:s,bounds:a,position:{x:l,y:d},disabled:u}=e;const{0:c,1:p}=(0,o.useState)(l),{0:m,1:f}=(0,o.useState)(d);(0,o.useEffect)((()=>{p(l),f(d)}),[l,d]);const g=(0,y.c0)((e=>{let{event:o,xy:[s,l],first:d,last:g}=e,h=0,v=0;const y=window.innerWidth>768?60:0;r.current&&(h=r.current.getBoundingClientRect().top,v=r.current.getBoundingClientRect().left);if(!u&&o){const e=l<a.top+h,r=l>a.bottom+h-y,u=s<a.left+v,b=s>a.right+v,w={top:e,bottom:r,left:u,right:b};!g||"mouseup"!==o.type&&"touchend"!==o.type?Object.values(w).filter((e=>!0===e)).length>1?(!0===w.top&&f(a.top),!0===w.bottom&&f(a.bottom-y),!0===w.left&&p(a.left),!0===w.right&&p(a.right)):u?(p(a.left),f(l-h)):b?(p(a.right),f(l-h)):e?(p(s-v),f(a.top)):r?(p(s-v),f(a.bottom-y)):!d||"mousedown"!==o.type&&"touchstart"!==o.type?(p(s-v),f(l-h)):(n&&n({x:c,y:m}),t(o,{x:c,y:m})):(t(o,{x:c,y:m}),i(o,{x:c,y:m}))}}));return(0,b.jsx)(O,x(x({x:c,y:m},g()),{},{children:s}))},O=r.default.div.attrs((e=>{let{x:t,y:n}=e;return{style:{top:(0,p.rem)(n),left:(0,p.rem)(t)}}})).withConfig({componentId:"sc-156honp-0"})(["position:absolute;touch-action:none;"]),C=e=>{let{buttonRef:t,children:n,id:i,onClick:s,onMouseEnter:a,onMouseLeave:l,isActive:d,isDisabled:u=!1,isDragging:c=!1,disabled:p,bounds:m,onDrag:f,onStart:g,onStop:y,position:w,boardRef:x}=e;const O=(0,o.useContext)(r.ThemeContext);return(0,b.jsx)(j,{boardRef:x,bounds:m,disabled:p,onDrag:f,onStart:g,onStop:y,position:w,children:(0,b.jsx)(v,{onClick:s,onMouseEnter:a,onMouseLeave:l,id:i,isActive:d,isDisabled:u,isDragging:c,ref:t,type:"button",children:(0,b.jsx)(h,{color:O.formats.primary,children:n})})})};var P=n(10392),k=n(53217),D=n(4080);const R=["isActive","isCompleted"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const S=r.default.div.withConfig({componentId:"sc-11dwao5-0"})(["font-size:",";line-height:1.2;color:#4e5a5e;top:0;left:0;transform-origin:top left;pointer-events:all;position:absolute;width:100%;height:100%;z-index:",";"],(0,p.rem)(14),(e=>{let{hasForm:t}=e;return t?D.s_:"8"})),I=r.default.div.withConfig({componentId:"sc-11dwao5-1"})(["display:flex;align-items:center;justify-content:center;pointer-events:none;position:absolute;top:0px;left:0px;width:100%;height:100%;"]),z=r.default.div.withConfig({componentId:"sc-11dwao5-2"})(["font-size:14px;background-color:rgba(0,0,0,0.5);border-radius:3px;padding:12px 16px;margin-top:",";@media screen and (max-width:","){margin-top:0;}"],(0,p.rem)(60),(0,p.rem)(768)),A=(0,r.default)((e=>{let{isActive:t,isCompleted:n}=e,o=(0,P.Z)(e,R);return(0,b.jsx)(k.M,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o))})).withConfig({componentId:"sc-11dwao5-3"})(["width:",";height:",";z-index:1;transition:transform 0.2s cubic-bezier(0.16,1.14,0.63,2),opacity 0.2s;"," path{fill:",";}"],(0,p.rem)(18),(0,p.rem)(18),(e=>{let{isCompleted:t}=e;return t?"\n        opacity: 1;\n        transform: scale(1);\n    ":"\n        opacity: 0;\n        transform: scale(0.7);\n    "}),(e=>{let{isActive:t,theme:n}=e;return t?(0,p.readableColor)((0,p.darken)(.3,n.formats.primary)):n.formats.primary})),M=r.default.button.withConfig({componentId:"sc-1mav6wk-0"})(["background:none;border:none;color:transparent;display:block;height:100%;margin:0;outline:none;padding:0;width:100%;cursor:pointer;visibility:",";"],(e=>e.isHidden?"hidden":"visible")),L=r.default.span.attrs((e=>{let{x:t,y:n}=e;return{style:{transform:`translate3d(${t}px, ${n}px, 0)`}}})).withConfig({componentId:"sc-1mav6wk-1"})(["background-color:rgba(0,0,0,0.5);border-radius:",";color:white;display:",";font-size:",";font-family:'Helvetica Neue',Helvetica,Arial !important;text-rendering:optimizeLegibility;-webkit-font-smoothing:auto;left:0;padding:"," ",";position:absolute;top:0;white-space:nowrap;z-index:1;@media screen and (max-width:","){visibility:hidden;}"],(0,p.rem)(3),(e=>{let{isVisible:t}=e;return t?"block":"none"}),(0,p.rem)(14),(0,p.rem)(10),(0,p.rem)(8),(0,p.rem)(768));var U=n(1046),T=n(54255);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const F=e=>{const{isHidden:t,playerContainerRefNode:n,clickAreaRef:i}=e,{0:r,1:a}=(0,o.useState)(0),{0:d,1:u}=(0,o.useState)(0),{0:c,1:p}=(0,o.useState)(!1),{setAnnotationForm:m}=(0,o.useContext)(U.ui),{stage:{player:f}}=(0,o.useContext)(l.yC),{beginAnnotation:g,selectComment:h,updateVideoTime:v}=(0,o.useContext)(l.A2),y=n.getBoundingClientRect(),w={top:y.top,left:y.left,height:n.offsetHeight,width:n.offsetWidth},x=e=>{const{left:t,top:n}=w,{clientX:i,clientY:o}=e;a(i-t+30),u(o-n-10)};return(0,b.jsx)(M,{ref:i,type:"button",onClick:e=>{(e=>{const{clientX:t,clientY:n}=e,{left:i,top:o}=w,r=(0,T.hq)({x:t-i,y:n-o},w);f&&(m((e=>$($({},e),{},{position:r,timecode:f.currentTime,isShowing:!0}))),v(f,f.currentTime),f.pause()),h(null,null),g(r)})(e),p(!1)},onMouseEnter:e=>{x(e),p(!0)},onMouseMove:x,onMouseLeave:()=>{p(!1)},isHidden:t,children:(0,b.jsx)(L,{x:r,y:d,isVisible:c,children:(0,s.Iu)({singular:"Click to add a comment",dictionary:{es:{singular:"Haz clic para agregar un comentario"},"de-DE":{singular:"Klicken, um einen Kommentar hinzuzuf\xfcgen"},"fr-FR":{singular:"Cliquer pour ajouter un commentaire"},"ja-JP":{singular:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u3092\u8ffd\u52a0"},"ko-KR":{singular:"\uc18c\uac10\uc744 \ucd94\uac00\ud558\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694"},"pt-BR":{singular:"Clique para adicionar um coment\xe1rio"},"zh-CN":{singular:"\u70b9\u51fb\u6dfb\u52a0\u8bc4\u8bba"}}})})})};var K=n(57969),B=n(94024),Z=n(42145),N=n(23141),_=n(62778),q=n(6093),J=n(56211),V=n(44125),G=n(69628),Q=n(59238),W=n(22315),Y=n(54641);const X=["maxLineCount","minLineCount"];function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ne=e=>{let{minLineCount:t=1,maxLineCount:n=1}=e;if(t>n)throw new RangeError(`ElasticTextarea minLineCount(${t}) is greater than the maxLineCount(${n})`)};class ie extends o.PureComponent{constructor(e){super(e),(0,i.Z)(this,"storeRef",(0,o.createRef)()),(0,i.Z)(this,"updateHeight",(()=>{if(this.storeRef.current){this.storeRef.current.style.height="auto";const e=((e,t)=>{let{minLineCount:n,maxLineCount:i}=t;const o=window.getComputedStyle(e),r=(o.paddingBottom?parseFloat(o.paddingBottom):0)+(o.paddingTop?parseFloat(o.paddingTop):0),s=o.lineHeight?parseFloat(o.lineHeight):0;let a=e.scrollHeight-r;if(i||n){let e=Math.ceil(a/s);i&&(e=Math.min(i,e)),n&&(e=Math.max(n,e)),a=e*s}return a+r})(this.storeRef.current,this.props);this.storeRef.current.style.height=`${e}px`}})),ne(e)}componentDidMount(){this.updateHeight()}componentWillReceiveProps(e){ne(e)}componentDidUpdate(){this.updateHeight()}render(){const e=this.props,{maxLineCount:t,minLineCount:n}=e,i=(0,P.Z)(e,X);return(0,b.jsx)("textarea",te(te({},i),{},{ref:this.storeRef}))}}const oe=["textIndent"],re=["disableSave","color"];function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const le=r.default.div.withConfig({componentId:"sc-17n9szi-0"})(["background-color:",";box-shadow:0 10px 12px 2px rgba(0,0,0,0.25);border-radius:",";max-width:100%;min-height:",";overflow:hidden;padding:",";position:absolute;width:",";transition:opacity 0.2s ease-out,transform 0.2s ease-out;color:",";"," @media screen and (max-width:","){position:fixed;width:100vw;height:100vh;left:0;right:0;top:0;bottom:0;border-radius:0;","}"],(e=>e.theme.content.background),(0,p.rem)(5),(0,p.rem)(125),(0,p.rem)(16),(0,p.rem)(300),(e=>{let{theme:t}=e;return t.additions.content.color}),(e=>e.isDragging&&"\n        opacity: 0;\n        transform: scale(0.95);\n    "),(0,p.rem)(768),(e=>e.isDragging&&"\n            opacity: 1;\n        ")),de=r.default.div.withConfig({componentId:"sc-17n9szi-1"})(["display:flex;@media screen and (max-width:","){font-size:",";}"],(0,p.rem)(768),(0,p.rem)(18)),ue=r.default.div.withConfig({componentId:"sc-17n9szi-2"})(["flex-grow:1;margin-top:",";max-height:",";overflow-y:auto;position:relative;"],(0,p.rem)(5),(0,p.rem)(225)),ce=(0,r.default)(Y.q).withConfig({componentId:"sc-17n9szi-3"})(["height:",";margin-right:",";width:",";@media screen and (max-width:","){width:",";height:",";}"],(0,p.rem)(36),(0,p.rem)(10),(0,p.rem)(36),(0,p.rem)(768),(0,p.rem)(40),(0,p.rem)(40)),pe=r.default.div.withConfig({componentId:"sc-17n9szi-4"})(["display:flex;flex-basis:100%;justify-content:flex-end;margin-top:",";@media screen and (max-width:","){display:none;}"],(0,p.rem)(20),(0,p.rem)(768)),me=r.default.div.withConfig({componentId:"sc-17n9szi-5"})(["display:flex;flex-basis:100%;margin-top:",";@media screen and (max-width:","){display:none;}"],(0,p.rem)(5),(0,p.rem)(768)),fe=(0,r.default)((e=>{let{textIndent:t}=e,n=(0,P.Z)(e,oe);return(0,b.jsx)(ie,ae({},n))})).withConfig({componentId:"sc-17n9szi-6"})(["appearance:none;border:none;line-height:1.6;overflow-y:hidden;outline:none;padding:0;resize:none;width:100%;text-indent:","px;font-family:inherit;font-size:inherit;margin:0em;background-color:inherit;@media screen and (max-width:","){font-size:",";}"],(e=>e.textIndent),(0,p.rem)(768),(0,p.rem)(18)),ge=r.default.span.withConfig({componentId:"sc-17n9szi-7"})(["color:",";font-weight:bold;left:0;line-height:1.6;position:absolute;top:0;&:after{content:'-';display:inline-block;font-weight:normal;padding:0 ",";}"],(e=>{let{theme:t}=e;return t.description.color3}),(0,p.rem)(2)),he=r.default.div.withConfig({componentId:"sc-17n9szi-8"})(["display:none;justify-content:space-between;width:100%;margin-bottom:1.375rem;padding:0.5rem 0 1.375rem 0;border-bottom:1px solid #eef1f2;font-size:1.125rem;@media screen and (max-width:","){display:flex;}> svg{position:relative;top:0.1875rem;}"],(0,p.rem)(768)),ve=(0,r.default)((e=>{let{disableSave:t,color:n}=e,i=(0,P.Z)(e,re);return(0,b.jsx)(k.M,ae({},i))})).withConfig({componentId:"sc-17n9szi-9"})(["width:",";height:",";z-index:1;path{fill:",";}"],(0,p.rem)(18),(0,p.rem)(18),(e=>e.disableSave?"#D0D8DB":e.color)),ye=(0,r.default)(W.z).withConfig({componentId:"sc-17n9szi-10"})(["line-height:2.1428571429;min-width:0;min-height:0;padding:0 0.75rem;"]),be=(0,r.default)(W.z).withConfig({componentId:"sc-17n9szi-11"})(["border:0;font-size:inherit;font-weight:normal;line-height:normal;min-height:0;min-width:0;padding:0;&:active{cursor:wait;}"]);var we=n(23008);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Oe=()=>{(0,J.hP)({isReply:!1,isTimecoded:!0,type:"text"})},Ce=e=>{let{formRef:t,isDragging:n,onCancel:i}=e;const{0:a,1:u}=(0,o.useState)(0),{0:c,1:p}=(0,o.useState)(!0),{annotationForm:m,setAnnotationForm:f}=(0,o.useContext)(U.ui),g=(0,o.useContext)(d.Z),h=null!==g&&void 0!==g&&g.user?g.user.pictures.sizes[1].link:D.ur,v=(0,o.useContext)(l.yC),{addCommentState:y,richCommentText:w,video:x,stage:{commentInProgress:j}}=v,{showMentionsPopover:O,registerKeyDownHandler:C,unregisterKeyDownHandler:P,grantAccessToMentionedUsers:k,setIsMentionsActive:R}=(0,o.useContext)(B.U9),E=y===V.c1.Requesting,S=(0,o.useContext)(r.ThemeContext),{addTimecodedComment:I,setIsReply:z,setExistingReplyCount:A}=(0,o.useContext)(l.A2),{editor:M,mentionListRef:L,mentionedUsers:T}=(0,o.useContext)(B.VZ),{trackMentionImpression:H}=(0,J.iO)(),$=(0,o.useRef)(null),F=null===x||void 0===x?void 0:x.id;(0,o.useEffect)((()=>{var e;m.isShowing&&(null===M||void 0===M||null===(e=M.chain())||void 0===e||e.focus(),z(!1),A(0))}),[M,m.isShowing]),(0,o.useEffect)((()=>{var e;const t=()=>R(!1);return null===M||void 0===M||null===(e=M.on)||void 0===e||e.call(M,"blur",t),()=>{var e;null===M||void 0===M||null===(e=M.off)||void 0===e||e.call(M,"blur",t)}}),[M,R]),(0,o.useEffect)((()=>{!E&&!j&&m.isShowing&&m.text.length>0&&f(U.G)}),[E,j]);const K=(0,o.useCallback)((e=>{null!==e&&u(e.offsetWidth)}),[]);(0,o.useEffect)((()=>{p(M?E||M.getText().trim().length<1:E||m.text.trim().length<1)}),[E,m.text,M]);const _=(0,o.useCallback)((()=>{if(m.isShowing){const e={text:m.text,richtext:M?m.text:void 0,timecode:m.timecode,x:m.position.x,y:m.position.y,name:null};M&&F&&k(F,T);const t=!!M&&!!T.find((e=>(0,G.hs)(e)));I(e,M,t)}}),[m,M,I,T,F]),W=(0,o.useCallback)((e=>{const t=(null===M||void 0===M?void 0:M.getText())??"";return"Enter"===e.key&&!e.shiftKey&&t.trim().length&&(e.preventDefault(),_()),e}),[_,M]),Y=(0,o.useCallback)((e=>{W(e)}),[W]);(0,o.useEffect)((()=>{M&&!E&&f((e=>je(je({},e),{},{text:w})))}),[E,M,w,f]),(0,o.useEffect)((()=>(C(Y),()=>P(Y))),[Y]);const X=O();return(0,o.useEffect)((()=>{X&&H(v)}),[X]),(0,b.jsxs)(le,{ref:t,isDragging:n,children:[(0,b.jsxs)(he,{children:[(0,b.jsx)(be,{variant:"minimal",onClick:e=>{e.preventDefault(),N.FatalAttraction.trackClick({container:"video_review",component:"player",keyword:"comment_cancel"}),f(U.G),i()},children:(0,s.Iu)({singular:"Cancel",dictionary:{es:{singular:"Cancelar"},"de-DE":{singular:"Abbrechen"},"fr-FR":{singular:"Annuler"},"ja-JP":{singular:"\u30ad\u30e3\u30f3\u30bb\u30eb"},"ko-KR":{singular:"\ucde8\uc18c"},"pt-BR":{singular:"Cancelar"},"zh-CN":{singular:"\u53d6\u6d88"}}})}),(0,b.jsx)(ve,{color:S.formats.primary,disableSave:c,onClick:()=>{N.FatalAttraction.trackClick({container:"video_review",component:"player",keyword:"add_comment_submit"}),c||_()},"aria-label":(0,s.Iu)({singular:"Add",dictionary:{es:{singular:"Agregar"},"de-DE":{singular:"Hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter"},"ja-JP":{singular:"\u8ffd\u52a0"},"ko-KR":{singular:"\ucd94\uac00"},"pt-BR":{singular:"Adicionar"},"zh-CN":{singular:"\u6dfb\u52a0"}}})})]}),(0,b.jsxs)(de,{children:[(0,b.jsx)(ce,{size:"sm",src:h}),(0,b.jsxs)(ue,{children:[M?(0,b.jsx)(Pe,{attach:"top",active:X,content:(0,b.jsx)("div",{ref:$,children:(0,b.jsx)(Q.x,{ref:L})}),children:(0,b.jsx)(ke,{children:(0,b.jsx)(Z.kg,{style:{textIndent:`${a}px`,lineHeight:"1.6"},autoFocus:!0,"aria-label":(0,s.Iu)({singular:"Add a note",dictionary:{es:{singular:"Agregar una nota"},"de-DE":{singular:"Eine Anmerkung hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter une note"},"ja-JP":{singular:"\u30e1\u30e2\u3092\u8ffd\u52a0"},"ko-KR":{singular:"\uba54\ubaa8 \ucd94\uac00"},"pt-BR":{singular:"Adicionar uma observa\xe7\xe3o"},"zh-CN":{singular:"\u6dfb\u52a0\u4e00\u6761\u5907\u6ce8"}}}),editor:M})})}):(0,b.jsx)(fe,{autoFocus:!0,"aria-label":(0,s.Iu)({singular:"Add a note",dictionary:{es:{singular:"Agregar una nota"},"de-DE":{singular:"Eine Anmerkung hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter une note"},"ja-JP":{singular:"\u30e1\u30e2\u3092\u8ffd\u52a0"},"ko-KR":{singular:"\uba54\ubaa8 \ucd94\uac00"},"pt-BR":{singular:"Adicionar uma observa\xe7\xe3o"},"zh-CN":{singular:"\u6dfb\u52a0\u4e00\u6761\u5907\u6ce8"}}}),textIndent:a,rows:"1",value:m.text,onChange:e=>{if(!E){const{value:t}=e.target;f((e=>je(je({},e),{},{text:t})))}},onKeyDown:c?null:W,onFocus:Oe}),(0,b.jsx)(ge,{ref:K,children:(0,we.kV)(m.timecode)})]})]}),(0,b.jsx)(pe,{children:(0,b.jsx)(ye,{disabled:c,format:"primary",onClick:e=>{e.preventDefault(),N.FatalAttraction.trackClick({container:"video_review",component:"player",keyword:"add_comment_submit"}),_()},children:(0,s.Iu)({singular:"Post",dictionary:{es:{singular:"Publicar"},"de-DE":{singular:"Posten"},"fr-FR":{singular:"Publier"},"ja-JP":{singular:"\u6295\u7a3f"},"ko-KR":{singular:"\uac8c\uc2dc"},"pt-BR":{singular:"Publicar"},"zh-CN":{singular:"\u53d1\u5e03"}}})})}),(0,b.jsx)(me,{children:(0,b.jsx)(q.D,{active:!0})})]})},Pe=(0,r.default)(_.v).withConfig({componentId:"sc-1nia025-0"})(["width:100%;"]),ke=r.default.div.withConfig({componentId:"sc-1nia025-1"})(["*:focus-visible{outline:none;}color:",";.ProseMirror p.is-editor-empty:first-child::before{color:",";content:attr(data-placeholder);float:left;height:0;pointer-events:none;}::-webkit-scrollbar{display:none;}-ms-overflow-style:none;scrollbar-width:none;"],(e=>{let{theme:t}=e;return t.additions.content.color}),(e=>{let{theme:t}=e;return t.description.color1})),De=e=>{let{bounds:t,position:n,onDrag:i,onDragStart:r,onDragStop:s,boardRef:a,clickAreaRef:d,playerMeasurements:u}=e;const c=(0,o.useRef)(null),p=(0,o.useRef)(null),m=(0,o.useRef)(null);let f=(0,o.useRef)(!1);const{annotationForm:g,setAnnotationForm:h}=(0,o.useContext)(U.ui),{isMentionsActive:v}=(0,o.useContext)(B.VZ),{cancelAnnotation:y}=(0,o.useContext)(l.A2),{stage:{isDragging:w}}=(0,o.useContext)(l.yC),x=()=>{f.current=!0},j=e=>{27===e.keyCode&&(h(U.G),y())},O=(0,o.useCallback)((()=>{if(!(window.innerWidth<=768)){if(p.current&&m.current&&d.current){let{x:e,y:t}=((e,t,n)=>{const i=19,o=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=r.top-o.top+i,a=r.left-o.left+i,l=n.offsetWidth,d=n.offsetHeight,u=t.offsetWidth,c=t.offsetHeight,p=s-34>0,m=s+c-34<d+60,f=a+u+i<l,g={moveBottom:s+i,moveLeft:a-34,moveInverse:a-(u+i),moveRight:a+i,moveTop:s-34,moveAbove:s-(c-60+2)};let h={x:g.moveTop,y:g.moveRight};switch(!0){case!p&&!(a-34>0):h.x=g.moveBottom,h.y=g.moveRight;break;case!p&&!f:h.x=g.moveBottom,h.y=g.moveInverse;break;case!f&&!m:h.x=g.moveAbove,h.y=g.moveInverse;break;case!p:h.x=g.moveBottom,h.y=g.moveLeft;break;case!f:h.x=g.moveTop,h.y=g.moveInverse;break;case!m:h.x=g.moveAbove,h.y=g.moveRight;break;default:h.x=g.moveTop,h.y=g.moveRight}return h})(p.current,m.current,d.current);e+m.current.offsetHeight>u.height&&(e=u.height-m.current.offsetHeight),m.current.style.top=`${e}px`,m.current.style.left=`${t}px`}f.current=!1}}),[d,u,g]);return(0,o.useEffect)((()=>(window.addEventListener("resize",x),document.addEventListener("keydown",j),O(),()=>{window.removeEventListener("resize",x),document.removeEventListener("keydown",j)})),[]),(0,K.O)([c],(()=>{v||(h(U.G),y())})),(0,o.useEffect)((()=>{!f.current&&w||O()}),[w,O]),(0,b.jsxs)("div",{ref:c,children:[(0,b.jsx)(C,{bounds:t,isActive:!0,isDragging:w,position:n,onDrag:i,onStart:r,onStop:s,buttonRef:p,boardRef:a}),(0,b.jsx)(Ce,{formRef:m,isDragging:w,onCancel:y.bind(null)})]})};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Se=e=>{const{playerMeasurements:t,playerContainerRef:n}=e,i=(0,o.useContext)(l.A2),{activeCommentUri:r,comments:s,stage:{player:a,commentInProgress:p},video:m,isCommentsEnabled:f}=(0,o.useContext)(l.yC),g=null!==a&&void 0!==a&&a.paused?null===s||void 0===s?void 0:s.uris.filter((e=>!!s.byUri[e].timeCode&&s.byUri[e].timeCode===(null===a||void 0===a?void 0:a.currentTime))):null,h=(0,o.useContext)(d.Z),{annotationForm:v,setAnnotationForm:y}=(0,o.useContext)(U.ui),w=(0,o.useRef)(null),x=(0,o.useRef)(null),j={bottom:t.height,left:0,right:t.width,top:0},O=(e,n)=>{n=(0,T.hq)(n,t),i.onAnnotationDrag(n)},P=(e,n)=>{n=(0,T.hq)(n,t),y((e=>Ee(Ee({},e),{},{position:n}))),i.onAnnotationDragStop(),r&&i.updateAnnotationPosition(r,n)};(0,o.useEffect)((()=>{if(p&&h){const{text:e,x:t,y:n,timecode:i}=p;y({text:e,position:{x:t,y:n},timecode:i,isShowing:!0})}}),[p,h]);const{canMention:k,videoData:D}=(0,c.Z)(m),R=()=>v.isShowing?(0,b.jsx)(De,{bounds:j,onDrag:O,onDragStart:i.onAnnotationDragStart,onDragStop:P,position:(0,T.kv)({x:v.position.x,y:v.position.y},t),boardRef:w,clickAreaRef:x,playerMeasurements:t}):(0,b.jsx)(b.Fragment,{});return(0,b.jsxs)(S,{ref:w,hasForm:v.isShowing,children:[n.current&&f&&(0,b.jsx)(F,{isHidden:v.isShowing,playerContainerRefNode:n.current,clickAreaRef:x}),g&&g.map((e=>{var n,o,a,l,d;const u=null===s||void 0===s?void 0:s.byUri[e];if(!u)return null;const c=e===r,p=!(null===h||void 0===h||null===(n=h.user)||void 0===n||!n.uri)&&(null===h||void 0===h||null===(o=h.user)||void 0===o?void 0:o.uri)===(null===(a=u.user)||void 0===a?void 0:a.uri)&&f;return(0,b.jsx)(C,{id:`anchor_${u.uri.split("/").pop()}`,onClick:e=>i.selectComment(u.uri,e),onMouseEnter:()=>{(0,T.d$)(u.uri)},onMouseLeave:()=>{(0,T.d$)(u.uri,!1)},isActive:c,isDisabled:!c||!p,disabled:!c||!p,bounds:j,onDrag:O,onStop:P,position:(0,T.kv)({x:(null===(l=u.coordinates)||void 0===l?void 0:l.x)||1,y:(null===(d=u.coordinates)||void 0===d?void 0:d.y)||1},t),boardRef:w,children:(0,b.jsx)(A,{isActive:c,isCompleted:"open"!==u.status})},u.uri)})),k?(0,b.jsx)(u.ZP,{videoId:null===m||void 0===m?void 0:m.id,autofocus:!0,owner:null===D||void 0===D?void 0:D.user,children:R()}):R()]})},Ie=r.default.div.withConfig({componentId:"sc-1lu5y78-0"})(["font-size:",";font-family:'Helvetica Neue',Helvetica,Arial !important;color:#fff;text-rendering:optimizeLegibility;-webkit-font-smoothing:auto;"," width:100%;position:absolute;display:flex;justify-content:center;align-items:center;top:0;left:0;bottom:",";@media screen and (max-width:","){bottom:0;}"],(0,p.rem)(14),(e=>e.zIndex?`z-index: ${e.zIndex};`:""),(0,p.rem)(60),(0,p.rem)(768));function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Me=e=>{var t,n;const{playerContainerRef:i,teamAccentColor:d}=e,{activeCommentUri:u,comments:c,stage:{cuePoints:p,player:m,playerTime:f},video:g,isCommentsEnabled:h}=(0,o.useContext)(l.yC),v=!!f,{0:y,1:w}=(0,o.useState)({width:0,height:0}),{selectComment:x}=(0,o.useContext)(l.A2),j=!(null!==g&&void 0!==g&&g.showSvvTimecodedComments),O=(0,o.useCallback)((()=>{i.current&&w({height:i.current.offsetHeight,width:i.current.offsetWidth})}),[i]),C=(0,o.useCallback)((()=>{document.fullscreenElement||O()}),[i]);(0,o.useEffect)((()=>(window.addEventListener("resize",O),window.addEventListener("fullscreenchange",C),()=>{window.removeEventListener("resize",O),window.removeEventListener("fullscreenchange",C)})),[]),(0,o.useEffect)((()=>{i.current&&(O(),setTimeout((()=>{(0,T.PI)()}),0))}),[null===i||void 0===i||null===(t=i.current)||void 0===t?void 0:t.offsetHeight,null===i||void 0===i||null===(n=i.current)||void 0===n?void 0:n.offsetWidth]);const P=(0,o.useCallback)((e=>{let{data:{timecode:t}}=e;if(m&&m.paused&&m.currentTime&&"number"===typeof t&&c&&(m.pause(),t===m.currentTime)){const e=c.uris.filter((e=>c.byUri[e].timeCode===t));if(1!==e.length)return;x(e[0],null)}}),[m,c]);return(0,o.useEffect)((()=>(m&&(m._overrideControlbarBehavior(!0),m.addEventListener("cuepoint",P)),()=>{m&&(m._overrideControlbarBehavior(!1),(0,a.iT)(m),m.removeEventListener("cuepoint",P))})),[m,P]),(0,o.useEffect)((()=>{m&&!j&&(0,a.Jz)(m,p)}),[m,p,j]),(0,o.useEffect)((()=>{if(u){const e=null===c||void 0===c?void 0:c.byUri[u];e&&f&&!(0,we.lz)(e.timeCode,f)&&x(null,null)}}),[f]),j?null:v||!h||u?(0,b.jsx)(r.ThemeProvider,{theme:e=>d?Ae(Ae({},e),{},{formats:Ae(Ae({},e.formats),{},{primary:d})}):e,children:(0,b.jsx)(Ie,{children:(0,b.jsx)(U.ZP,{children:(0,b.jsx)(Se,{playerMeasurements:y,playerContainerRef:i})})})}):(0,b.jsx)(Ie,{zIndex:2,children:(0,b.jsx)(I,{children:(0,b.jsx)(z,{children:(0,s.Iu)({singular:"Play to comment",dictionary:{es:{singular:"Reproduzca para comentar"},"de-DE":{singular:"Abspielen, um zu kommentieren"},"fr-FR":{singular:"Lisez la vid\xe9o pour ajouter un commentaire"},"ja-JP":{singular:"\u518d\u751f\u3057\u3066\u30b3\u30e1\u30f3\u30c8"},"ko-KR":{singular:"\ub313\uae00\uc744 \ub2ec\ub824\uba74 \ub3d9\uc601\uc0c1\uc744 \uc7ac\uc0dd\ud558\uc138\uc694."},"pt-BR":{singular:"Assista ao v\xeddeo para comentar"},"zh-CN":{singular:"\u64ad\u653e\u540e\u624d\u80fd\u8bc4\u8bba"}}})})})})}},6093:function(e,t,n){n.d(t,{D:function(){return d}});var i=n(52983),o=n(62555),r=n(94024),s=n(69628),a=n(63660),l=n(97458);const d=e=>{let{active:t}=e,n="";const{editor:d}=(0,i.useContext)(r.VZ);if(!d)return(0,l.jsx)(l.Fragment,{});switch(!0){case(0,s.Qo)(d):n=(0,o.Iu)({singular:"Your @mention will add people to this discussion and send an email.",dictionary:{es:{singular:"Su @menci\xf3n agregar\xe1 personas a este debate y enviar\xe1 un correo electr\xf3nico."},"de-DE":{singular:"Mit deiner @Erw\xe4hnung f\xfcgst du Personen zu dieser Diskussion hinzu und sendest eine E-Mail."},"fr-FR":{singular:"Votre @mention permet d'ajouter des personnes \xe0 cette discussion et d'envoyer un e-mail."},"ja-JP":{singular:"@\u30b3\u30e1\u30f3\u30c8\u3067\u3001\u3053\u306e\u30c7\u30a3\u30b9\u30ab\u30c3\u30b7\u30e7\u30f3\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u3066\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3067\u304d\u307e\u3059\u3002"},"ko-KR":{singular:"@\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e4\ub978 \uc0ac\uc6a9\uc790\ub97c \uc5b8\uae09\ud558\uba74 \uc774 \ud1a0\ub860\uc5d0 \ud574\ub2f9 \uc0ac\uc6a9\uc790\uac00 \ucd94\uac00\ub418\uace0 \uc774\uba54\uc77c\uc774 \uc804\uc1a1\ub429\ub2c8\ub2e4."},"pt-BR":{singular:'A men\xe7\xe3o com "@" adicionar\xe1 pessoas \xe0 discuss\xe3o e enviar\xe1 um e-mail.'},"zh-CN":{singular:"\u4f7f\u7528 @ \u4f1a\u5c06\u63d0\u53ca\u7684\u4eba\u6dfb\u52a0\u5230\u8ba8\u8bba\u4e2d\uff0c\u5e76\u5411\u5176\u53d1\u9001\u7535\u5b50\u90ae\u4ef6\u3002"}}});break;case t:n=(0,o.Iu)({singular:"Add others to this discussion with @",dictionary:{es:{singular:"Agregue a otras personas a esta discusi\xf3n con @"},"de-DE":{singular:"F\xfcge weitere Personen mit @ zu dieser Diskussion hinzu"},"fr-FR":{singular:"Ajoutez d'autres personnes \xe0 cette discussion en utilisant @"},"ja-JP":{singular:"@\u3067\u3053\u306e\u30c7\u30a3\u30b9\u30ab\u30c3\u30b7\u30e7\u30f3\u306b\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0"},"ko-KR":{singular:"@\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc774 \ud1a0\ub860\uc5d0 \ub2e4\ub978 \uc0ac\uc6a9\uc790\ub97c \ucd94\uac00\ud558\uc138\uc694."},"pt-BR":{singular:"Use @ para adicionar outras pessoas \xe0 discuss\xe3o"},"zh-CN":{singular:"\u4f7f\u7528 @ \u6dfb\u52a0\u5176\u4ed6\u4eba\u53c2\u4e0e\u8ba8\u8bba"}}});break;default:n=""}return(0,l.jsx)(a.xv,{children:n})}},63660:function(e,t,n){n.d(t,{$d:function(){return f},Kx:function(){return u},LD:function(){return g},Pz:function(){return a},iu:function(){return p},on:function(){return l},q5:function(){return d},xv:function(){return m},zC:function(){return c}});var i=n(24777),o=n(73898),r=n(34087),s=n(62778);const a=o.default.div.withConfig({componentId:"sc-16yvl7j-0"})(["width:",";height:",";top:0;display:flex;z-index:10;justify-content:space-between;align-items:center;padding:",";",""],(e=>e?"100%":(0,i.rem)(340)),(0,i.rem)(70),(0,i.rem)(18),(e=>!e.isViewerHome&&`border-bottom: ${(0,i.rem)(1)} solid ${e.theme.additions.content.border};\n    background: ${e.theme.element.bg3}\n  `)),l=o.default.div.withConfig({componentId:"sc-16yvl7j-1"})(["overflow-y:auto;position:relative;padding-top:",";height:100vh;right:0;border-bottom:",";input,select{background:inherit;}&:last-of-type{border-bottom:none;}",""],(e=>e.hasDeepLinkedComment&&e.isPreview?`${(0,i.rem)(70)}`:"0"),(e=>{let{theme:t,isViewerHome:n}=e;return n?"none":`1px solid ${t.additions.content.border}`}),(e=>{let{isViewerHome:t}=e;return t&&"display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: calc(100% - 88px);\n  "})),d=o.default.div.withConfig({componentId:"sc-16yvl7j-2"})(["position:absolute;z-index:5;bottom:0;right:0;width:100%;",""],(e=>{let{isViewerHome:t,theme:n}=e;return!t&&`padding: 0 ${(0,i.rem)(16)};\n    background: linear-gradient(0deg, ${n.element.bg3} 82%, ${(0,i.transparentize)(1,n.element.bg3)} 100%);\n  };`})),u=(0,o.default)(r.K).withConfig({componentId:"sc-16yvl7j-3"})(["background:inherit;padding:",";height:80%;resize:none;border:none;::placeholder{color:",";}transition:none;color:",";"],(0,i.rem)(8),(e=>{let{theme:t}=e;return t.description.color1}),(e=>{let{theme:t}=e;return t.modal.textColorPrimary})),c=o.default.div.withConfig({componentId:"sc-16yvl7j-4"})(["display:flex;flex-direction:column;justify-content:space-between;background:",";border-radius:",";border:1px solid ",";transition:height 120ms ease-in-out 0s;cursor:",";",""],(e=>{let{theme:t}=e;return t.element.bg3}),(0,i.rem)(3),(e=>{let{theme:t}=e;return t.additions.content.border}),(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{disabled:t}=e;return t&&"opacity: 40%"})),p=o.default.div.withConfig({componentId:"sc-16yvl7j-5"})([""," position:relative;padding-top:",";"," ","{height:",";cursor:",";",";& + div{border:none;}&:hover,:focus{border:none;& + div{border:none;}}}","{height:",";border:1px solid ",";}"],(e=>{let{isViewerHome:t}=e;return t?(0,o.css)(["margin:0 "," "," ",";"],(0,i.rem)(18),(0,i.rem)(24),(0,i.rem)(18)):(0,o.css)(["margin:0 0 "," 0;"],(0,i.rem)(24))}),(0,i.rem)(15),(e=>{let{isReply:t}=e;return t?(0,o.css)(["margin:0;padding:0 0 0 ",";"],(0,i.rem)(5)):""}),u,(e=>e.isExpanded?(0,i.rem)(60):(0,i.rem)(38)),(e=>e.isExpanded?"text":"pointer"),(e=>!e.isExpanded&&"white-space: nowrap;\n      overflow: hidden;\n      width: 96%;\n      "),c,(e=>e.isExpanded?(0,i.rem)(110):(0,i.rem)(40)),(e=>{let{theme:t}=e;return e=>e.isExpanded?t.formats.primary:t.additions.content.border})),m=o.default.div.withConfig({componentId:"sc-16yvl7j-6"})(["display:flex;padding-top:",";font-size:",";opacity:0.6;"],(0,i.rem)(4),(0,i.rem)(12)),f=(0,o.default)(s.v).withConfig({componentId:"sc-16yvl7j-7"})(["width:100%;"]),g=o.default.div.withConfig({componentId:"sc-16yvl7j-8"})(["color:",";padding:",";max-height:",";resize:none;border:none;transition:none;overflow-y:scroll;*:focus-visible{outline:none;}.ProseMirror p.is-editor-empty:first-child::before{color:",";content:attr(data-placeholder);float:left;height:0;pointer-events:none;}::-webkit-scrollbar{display:none;}-ms-overflow-style:none;scrollbar-width:none;"],(e=>{let{theme:t}=e;return t.modal.textColorPrimary}),(0,i.rem)(8),(e=>e.isExpanded?"60%":"none"),(e=>{let{theme:t}=e;return t.description.color1}))},59238:function(e,t,n){n.d(t,{x:function(){return R}});var i=n(24777),o=n(52983),r=n(73898),s=n(19750),a=n(47911),l=n(12333),d=n(41567),u=n(4080),c=n(94024),p=n(17592),m=n(56211),f=n(69628),g=n(62555),h=n(80135),v=n(54641),y=n(61186),b=n(97458);const w=e=>{let{handleSelection:t,selectedIndex:n,index:i,imgSrc:o,imgSrcSet:r,mentioneeEmail:s,mentioneeName:a,isPending:l}=e;return(0,b.jsx)(k,{onClick:()=>t(i),active:n===i,children:(0,b.jsxs)(x,{children:[(0,b.jsx)(v.q,{size:"sm",src:o,srcSet:r}),(0,b.jsxs)(P,{isEmail:!!s,children:[(0,b.jsx)(C,{format:"bold",size:200,children:a??s}),s&&(0,b.jsx)(j,{size:100,children:l?(0,b.jsxs)(O,{children:[" ",(0,g.Iu)({singular:"Pending",dictionary:{es:{singular:"pendiente"},"de-DE":{singular:"ausstehend"},"fr-FR":{singular:"en attente"},"ja-JP":{singular:"\u4fdd\u7559"},"ko-KR":{singular:"\ubcf4\ub958 \uc911"},"pt-BR":{singular:"pendente"},"zh-CN":{singular:"\u5f85\u5b9a"}}})," "]}):s})]})]})},`mentioneee-${i}`)},x=r.default.div.withConfig({componentId:"moakt-0"})(["display:flex;gap:",";align-items:center;"],(0,i.rem)(8)),j=(0,r.default)(y.x).withConfig({componentId:"moakt-1"})(["color:",";"],(0,h.se)(500)),O=r.default.span.withConfig({componentId:"moakt-2"})(["font-style:italic;"]),C=(0,r.default)(y.x).withConfig({componentId:"moakt-3"})(["font-weight:700;display:block;letter-spacing:-",";"],(0,i.rem)(.2)),P=r.default.div.withConfig({componentId:"moakt-4"})([""," text-align:left;"],(e=>{let{isEmail:t=!1}=e;return t?"":(0,r.css)(["display:flex;align-items:center;"])})),k=(0,r.default)(s.v.Item).withConfig({componentId:"moakt-5"})(["width:100%;","{width:90%;","{width:100%;}}"],x,P);function D(e){return e.toLowerCase().replace(/[^0-9A-Z]+/gi,"")}const R=(0,o.forwardRef)(((e,t)=>{let{}=e;const{mentionedOwner:n,mentionsList:i,mentionProps:r,mentionedUsers:a,currentTeamUser:g,searchMentionQuery:h}=(0,o.useContext)(c.VZ),v=(0,o.useContext)(p.yC),{video:y}=v,x=(0,o.useContext)(l.Z),{trackAddMentioneeToComment:j}=(0,m.iO)(),{setMentionedUsers:O}=(0,o.useContext)(c.U9),C=null===r||void 0===r?void 0:r.command,{0:P,1:k}=(0,o.useState)(n?-1:0),R=(z=h,i.filter((e=>{const t=e.entity.teamUser,n=e.entity.guestUser,i=e.entity.user||(null===t||void 0===t?void 0:t.user),o=D((null===i||void 0===i?void 0:i.email)??String(null===t||void 0===t?void 0:t.email)),r=D((null===i||void 0===i?void 0:i.name)??String(null===t||void 0===t?void 0:t.email));let s=!1;const a=D(z);if(n){const e=D(null===n||void 0===n?void 0:n.name);e&&-1!==e.indexOf(a)&&(s=!0)}return o&&-1!==o.indexOf(a)&&(s=!0),r&&-1!==r.indexOf(a)&&(s=!0),s})));var z;const A=e=>{var t;if(!y||(null===x||void 0===x||!x.user)&&!y.allowGuestComments)return;const i=(0,f._G)(y.user.uri),o=(null===x||void 0===x||null===(t=x.user)||void 0===t?void 0:t.id)===i?d.tE.Owner:(null===g||void 0===g?void 0:g.permissionLevel)??"";if(-1===e&&n)null===C||void 0===C||C({label:n.name,userId:(0,f._G)(n.uri)}),j(n,o,v);else{var r;const t=null!==R&&void 0!==R&&R.length?R[e]:null,n=null===t||void 0===t||null===(r=t.entity.teamUser)||void 0===r?void 0:r.permissionLevel;t&&(null===C||void 0===C||C((0,f.p9)(t)),O([...a,t]),j(t,n,v))}};return(0,o.useImperativeHandle)(t,(()=>({onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(n&&0===P?k(-1):R.length&&k((P+R.length-1)%R.length),!0):"ArrowDown"===t.key?(R.length&&k((P+R.length+1)%R.length),!0):"Enter"===t.key&&(A(P),!0)}}))),(0,o.useEffect)((()=>{window.dispatchEvent(new Event("resize"))}),[R]),Boolean(R.length)||n?(0,b.jsx)(s.v,{children:R.map(((e,t)=>{const n=e.entity.teamUser,i=e.entity.user||(null===n||void 0===n?void 0:n.user),o=e.entity.guestUser,r=(null===n||void 0===n?void 0:n.status)===u.u2.Pending,[s,a]=((e,t)=>e?[u.rp,u.rp]:t&&t.pictures?[t.pictures.sizes[3].link,t.pictures.sizes[4].link]:[u.ur,u.ur])(r,i??void 0),l=(null===n||void 0===n?void 0:n.email)||(null===i||void 0===i?void 0:i.email)||"",d=(null===o||void 0===o?void 0:o.name)||(null===i||void 0===i?void 0:i.name)||l;return(0,b.jsx)(w,{imgSrc:s,imgSrcSet:a,index:t,selectedIndex:P,isPending:r,mentioneeEmail:l,mentioneeName:d,handleSelection:A},`mentionee-${t}`)}))}):(0,b.jsxs)(s.v,{children:[(0,b.jsx)(s.v.Item,{children:(0,b.jsxs)(I,{children:[(0,b.jsx)(E,{}),(0,b.jsx)(S,{})]})}),(0,b.jsx)(s.v.Item,{children:(0,b.jsxs)(I,{children:[(0,b.jsx)(E,{}),(0,b.jsx)(S,{})]})}),(0,b.jsx)(s.v.Item,{children:(0,b.jsxs)(I,{children:[(0,b.jsx)(E,{}),(0,b.jsx)(S,{})]})})]})})),E=(0,r.default)(a.O).withConfig({componentId:"d4uzpv-0"})(["height:",";width:",";border-radius:100%;"],(0,i.rem)(30),(0,i.rem)(30)),S=(0,r.default)(a.O).withConfig({componentId:"d4uzpv-1"})(["height:",";flex-grow:1;border-radius:",";"],(0,i.rem)(30),(0,i.rem)(10)),I=r.default.div.withConfig({componentId:"d4uzpv-2"})(["width:100%;display:flex;gap:",";"],(0,i.rem)(8))},93805:function(e,t,n){n.d(t,{ZP:function(){return S}});var i=n(84493),o=n(93336),r=n(42145),s=n(51899),a=n.n(s),l=n(52983),d=n(72572),u=n(91450),c=n(24288),p=n(13510),m=n(92773),f=n(62555),g=n(12333),h=n(4080),v=n(69628),y=n(63444);var b=n(94024),w=n(44125);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const O={[w.vd.SetMentionProps]:(e,t)=>j(j({},e),{},{mentionProps:t.payload}),[w.vd.SetRichTextEditor]:(e,t)=>j(j({},e),{},{editor:t.payload}),[w.vd.SetIsMentionsActive]:(e,t)=>j(j({},e),{},{isMentionsActive:t.payload}),[w.vd.SetMentionedOwner]:(e,t)=>j(j({},e),{},{mentionedOwner:t.payload}),[w.vd.SetCurrentTeamUser]:(e,t)=>j(j({},e),{},{currentTeamUser:t.payload}),[w.vd.SetMentionListRef]:(e,t)=>j(j({},e),{},{mentionListRef:t.payload}),[w.vd.SetLoadingMentions]:(e,t)=>j(j({},e),{},{loadingMentions:t.payload}),[w.vd.SetMentionsList]:(e,t)=>j(j({},e),{},{mentionsList:t.payload}),[w.vd.SetMentionedUsers]:(e,t)=>j(j({},e),{},{mentionedUsers:t.payload}),[w.vd.RegisterKeyDownHandler]:(e,t)=>{const n=[...e.registeredKeyDownHandlers];return n.push(t.payload),j(j({},e),{},{registeredKeyDownHandlers:n})},[w.vd.UnregisterKeyDownHandler]:(e,t)=>j(j({},e),{},{registeredKeyDownHandlers:e.registeredKeyDownHandlers.filter((e=>e!==t.payload))}),[w.vd.SetSearchMentionQuery]:(e,t)=>j(j({},e),{},{searchMentionQuery:t.payload})},C=(e,t)=>{const n=O[t.type];return n?n(e,t):e};var P=n(17592),k=n(56211),D=n(97458);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){let{videoId:t,autofocus:n=!1,openPrivacyDrawer:i,owner:s,children:x}=e;const j=(0,d.pm)(),O=(0,l.useContext)(g.Z),R=(0,l.useContext)(P.A2),S=(0,l.useContext)(P.yC),{video:I}=S,{setRichCommentText:z}=R,{0:A,1:M}=(0,l.useState)(null),{0:L,1:U}=(0,l.useState)(!1),T=(0,l.useRef)(),{trackAddMentioneeToComment:H}=(0,k.iO)(),{0:$,1:F}=(0,l.useReducer)(C,(0,b.Hi)()),{editor:K,mentionListRef:B,loadingMentions:Z,mentionsList:N,mentionedUsers:_,registeredKeyDownHandlers:q,isMentionsActive:J,currentTeamUser:V}=$,[G,Q]=(0,m.S)();let W=((e,t)=>({setMentionProps:e=>{t({type:w.vd.SetMentionProps,payload:e})},setRichTextEditor:e=>{t({type:w.vd.SetRichTextEditor,payload:e})},setIsMentionsActive:e=>{t({type:w.vd.SetIsMentionsActive,payload:e})},setMentionedOwner:e=>{t({type:w.vd.SetMentionedOwner,payload:e})},setCurrentTeamUser:e=>{t({type:w.vd.SetCurrentTeamUser,payload:e})},setMentionListRef:e=>{t({type:w.vd.SetMentionListRef,payload:e})},setLoadingMentions:e=>{t({type:w.vd.SetLoadingMentions,payload:e})},setMentionsList:e=>{t({type:w.vd.SetMentionsList,payload:e})},setMentionedUsers:e=>{t({type:w.vd.SetMentionedUsers,payload:e})},registerKeyDownHandler:e=>{t({type:w.vd.RegisterKeyDownHandler,payload:e})},unregisterKeyDownHandler:e=>{t({type:w.vd.UnregisterKeyDownHandler,payload:e})},showMentionsPopover:()=>{const{isMentionsActive:t,mentionProps:n,mentionsList:i,loadingMentions:o,mentionedOwner:r,searchMentionQuery:s}=e;return t&&!!n&&(Boolean(i.length)||o||Boolean(r))},setSearchMentionQuery:e=>{t({type:w.vd.SetSearchMentionQuery,payload:e})}}))($,F);const{setMentionProps:Y,setIsMentionsActive:X,setRichTextEditor:ee,setMentionListRef:te,setMentionsList:ne,setMentionedUsers:ie,setLoadingMentions:oe,setCurrentTeamUser:re,setSearchMentionQuery:se}=W;W=E(E({},W),{},{openPrivacyDrawer:i,grantAccessToMentionedUsers:async(e,t)=>{var n,i,o;let r=!1;(null===I||void 0===I||null===(n=I.metadata)||void 0===n||null===(i=n.interactions)||void 0===i||null===(o=i.invite)||void 0===o?void 0:o.uri)&&await Promise.all(t.map((async t=>{var n,i,o;const s=(null===(n=t.entity)||void 0===n||null===(i=n.teamUser)||void 0===i?void 0:i.permissionLevel)||"",a=null===(o=t.entity)||void 0===o?void 0:o.guestUser;if(s!==h.V5.Owner&&!a){const n=(e=>{const t=e.currentPermissions;var n;return t?t.permissionPolicyUri&&!t.hasDirectAccessToResource?t.permissionPolicyUri:null:null===(n=e.applicablePermissionPolicies&&e.applicablePermissionPolicies.find((e=>e.name===h.kN.clipViewer)))||void 0===n?void 0:n.uri})(t);var l,d;if(n)await G({where:{videoId:e},variables:{teamEntityType:"team_user",teamEntityUri:null===(l=t.entity)||void 0===l||null===(d=l.teamUser)||void 0===d?void 0:d.uri,permissionPolicyUri:n,sendEmail:!1}}),r=!0}}))),r&&U(!0),ie([])}});const ae=(0,l.useRef)(null),le=(0,l.useRef)(),de=(0,l.useRef)(!1),ue=(0,l.useRef)(),{0:ce,1:pe}=(0,l.useState)(),[me,{loading:fe,data:ge}]=(0,p._A)(),he=null!==ge&&void 0!==ge&&ge.data?JSON.stringify(null===ge||void 0===ge?void 0:ge.data):"[]",ve=null===O||void 0===O?void 0:O.user,ye=(0,l.useMemo)((()=>a()((e=>{I&&t&&me({where:{videoId:I.hash?`${t}:${I.hash}`:t},query:{query:e,page:1,perPage:4},select:h.Mm})}),500)),[I,t,me]),{data:be}=(0,c.KO)((()=>ve&&s&&ve.id!==(0,v._G)(s.uri)?{query:{perPage:1,teamInviteStatuses:"accepted",teamStatuses:"active",users:ve.id.toString()},where:{userId:(0,v._G)(s.uri)},select:["uri","permissionLevel"]}:null),{revalidateOnFocus:!1,revalidateOnReconnect:!1});T.current=ye;const we=e=>{Y(e),$.isMentionsActive||X(!0)},xe=e=>{Y(e),ae.current=e,window.dispatchEvent(new Event("resize"))},je=e=>{if("Escape"===e.event.code)X(!1);else{if("Space"===e.event.code)return(()=>{var e;const t=null===(e=ae.current)||void 0===e?void 0:e.query;if(t&&s&&ve){const e=t.match(h.CU),r=t.toLowerCase();if(null!==e&&void 0!==e&&e.length){var n,i;if(((null===ve||void 0===ve?void 0:ve.email)??"").toLowerCase()===r)return!1;const e=(ue.current??[]).find((e=>{var t,n;return((null===(t=e.entity)||void 0===t||null===(n=t.teamUser)||void 0===n?void 0:n.email)??"").toLowerCase()===r})),t=null===e||void 0===e||null===(n=e.entity)||void 0===n||null===(i=n.teamUser)||void 0===i?void 0:i.permissionLevel;var o;if(e)return null===(o=ae.current)||void 0===o||o.command((0,v.p9)(e)),H(e,t,S),!0}}return!1})();if(null!==le&&void 0!==le&&le.current)return le.current.onKeyDown(e)}return!1},Oe=()=>{ae.current=null,X(!1)},Ce=(0,r.jE)({extensions:[...h.Q4,u.Z.configure({suggestion:{allowedPrefixes:null,allowSpaces:!1,findSuggestionMatch:e=>function(e){var t;const{char:n,allowSpaces:i,allowedPrefixes:o,startOfLine:r,$position:s}=e,a=(0,y.Ov)(n),l=new RegExp(`\\s${a}$`),d=r?"^":"",u=new RegExp(i?`${d}${a}[^\\s].*?(?=\\s${a}|$)`:`${d}(?:^)?\\B${a}(\\S+)*`,"gm"),c=(null===(t=s.nodeBefore)||void 0===t?void 0:t.isText)&&s.nodeBefore.text;if(!c)return null;const p=s.pos-c.length,m=Array.from(c.matchAll(u)).pop();if(!m||void 0===m.input||void 0===m.index)return null;const f=m.input.slice(Math.max(0,m.index-1),m.index),g=RegExp(`^[${null===o||void 0===o?void 0:o.join("").replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}\0]?$`).test(f);if(null!==o&&!g)return null;const h=p+m.index;let v=h+m[0].length;return m[0].length<2?null:(i&&l.test(c.slice(v-1,v+1))&&(m[0]+=" ",v+=1),h<s.pos&&v>=s.pos?{range:{from:h,to:v},query:m[0].slice(n.length),text:m[0]}:null)}(e),items:e=>{var t,n;let{query:i}=e;return se(i),i.length>=h.YA&&T.current(i),null!==ge&&void 0!==ge&&null!==(t=ge.data)&&void 0!==t&&t.length?null!==ge&&void 0!==ge&&null!==(n=ge.data)&&void 0!==n&&n.length&&fe!==Z&&oe(fe):oe(!0),[]},render:()=>({onStart:we,onUpdate:xe,onKeyDown:je,onExit:Oe})},onMentionRemove:e=>pe(e)}),o.Z.configure({placeholder:(0,f.Iu)({singular:"Add a comment",dictionary:{es:{singular:"A\xf1adir un comentario"},"de-DE":{singular:"Kommentar hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter un commentaire"},"ja-JP":{singular:"\u30b3\u30e1\u30f3\u30c8\u306e\u8ffd\u52a0"},"ko-KR":{singular:"\uc18c\uac10\uc744 \uc785\ub825\ud558\uc138\uc694"},"pt-BR":{singular:"Adicione um coment\xe1rio"},"zh-CN":{singular:"\u6dfb\u52a0\u8bc4\u8bba"}}})})],onUpdate:e=>{let{editor:t}=e;const n=JSON.stringify(t.getJSON());z(n)},editorProps:{handleDOMEvents:{keydown:(e,t)=>{const{key:n,shiftKey:i}=t;return de.current||(M(t),"Enter"!==n||i||(t.preventDefault(),t.stopPropagation())),!1}}},autofocus:n});(0,l.useEffect)((()=>{L&&(U(!1),j({title:Q.error?(0,f.Iu)({singular:"Oops, something went wrong.",dictionary:{es:{singular:"Ups, algo sali\xf3 mal."},"de-DE":{singular:"Oops, etwas ist schief gelaufen."},"fr-FR":{singular:"Oups\xa0! Une erreur s'est produite."},"ja-JP":{singular:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"},"ko-KR":{singular:"\uc557, \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."},"pt-BR":{singular:"Opa, algo deu errado."},"zh-CN":{singular:"\u54ce\u5440\uff0c\u51fa\u9519\u4e86\u3002"}}}):(0,f.Iu)({singular:"Shared with the people you mentioned",dictionary:{es:{singular:"Compartido con las personas que has mencionado"},"de-DE":{singular:"Mit den von dir erw\xe4hnten Personen geteilt"},"fr-FR":{singular:"Partag\xe9e avec les personnes que vous avez mentionn\xe9es"},"ja-JP":{singular:"\u30b3\u30e1\u30f3\u30c8\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3068\u5171\u6709\u3055\u308c\u307e\u3057\u305f"},"ko-KR":{singular:"\ub0b4\uac00 \uc5b8\uae09\ud55c \uc0ac\ub78c\ub4e4\uacfc \uacf5\uc720\ub429\ub2c8\ub2e4."},"pt-BR":{singular:"Compartilhado com as pessoas que voc\xea mencionou"},"zh-CN":{singular:"\u4e0e\u60a8\u63d0\u5230\u7684\u4eba\u5206\u4eab"}}})}))}),[L,Q,j]),(0,l.useEffect)((()=>{!B&&le&&te(le)}),[B,le,te]),(0,l.useEffect)((()=>{!K&&Ce&&ee(Ce)}),[Ce,K,ee]),(0,l.useEffect)((()=>{if(ce){const e=_.filter((e=>{var t,n,i,o,r,s;const a=null!==(t=e.entity)&&void 0!==t&&null!==(n=t.teamUser)&&void 0!==n&&n.uri?(0,v.uC)(null===(i=e.entity.teamUser)||void 0===i?void 0:i.uri):null,l=(null===(o=e.entity)||void 0===o?void 0:o.user)||(null===(r=e.entity)||void 0===r||null===(s=r.teamUser)||void 0===s?void 0:s.user);return(null!==l&&void 0!==l&&l.uri?(0,v._G)(null===l||void 0===l?void 0:l.uri):null)!==ce&&a!==ce}));ie(e),pe(null)}}),[ce,_]);const{0:Pe,1:ke}=(0,l.useMemo)((()=>{let e=null;const t=[];for(let i=0;i<N.length;i++){var n;const o=N[i];(null===(n=o.entity)||void 0===n?void 0:n.uri)===(null===s||void 0===s?void 0:s.uri)?e=o:t.push(o)}return[e,t]}),[s,N]);return(0,l.useEffect)((()=>{ge&&he!==JSON.stringify(ke)&&(ne(ge.data),ue.current=ge.data)}),[he,ge,ne,ke]),(0,l.useEffect)((()=>{null!==ge&&void 0!==ge&&ge.data&&fe!==Z&&oe(fe)}),[Z,fe,oe]),(0,l.useEffect)((()=>{A&&(q.forEach((e=>e(A))),M(null))}),[A,q]),(0,l.useEffect)((()=>{de.current=J}),[J]),(0,l.useEffect)((()=>{null!==be&&void 0!==be&&be.data&&be.data.length>0&&!V&&re(be.data[0])})),(0,D.jsx)(b.U9.Provider,{value:W,children:(0,D.jsx)(b.VZ.Provider,{value:$,children:x})})}},21840:function(e,t,n){var i=n(52983),o=n(657),r=n(66699),s=n(12333);t.Z=e=>{var t,n,a,l;const d=(0,i.useContext)(s.Z),{canShareFromP2M:u}=(0,o.B)(),c=null===e||void 0===e?void 0:e.metadata.interactions,p=null===c||void 0===c?void 0:c.teamMentions,{data:m,isValidating:f}=(0,r.m)((()=>{if(null===e||void 0===e||!e.id||!d||!p)return null;return{where:{videoId:e.hash?`${e.id}:${e.hash}`:e.id},select:["uri","user.uri","user.name","user.pictures","parentProject.metadata.connections.personalTeamFolderOwner.uri","allow_guest_comments"],headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.1"}}}),{revalidateOnFocus:!1,revalidateOnReconnect:!1});return{canMention:u?p:p&&!(null!==m&&void 0!==m&&null!==(t=m.parentProject)&&void 0!==t&&null!==(n=t.metadata)&&void 0!==n&&null!==(a=n.connections)&&void 0!==a&&null!==(l=a.personalTeamFolderOwner)&&void 0!==l&&l.uri),loading:f,videoData:m}}}}]);